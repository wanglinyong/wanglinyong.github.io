<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/wanglinyong.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/wanglinyong.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/wanglinyong.github.io/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/wanglinyong.github.io/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/wanglinyong.github.io/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/wanglinyong.github.io/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/wanglinyong.github.io/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/wanglinyong.github.io/atom.xml" title="Wang's Blog" type="application/atom+xml" />






<meta name="description" content="JAVA，Python，C#，Node.js，个人博客，Github，hexo">
<meta property="og:type" content="website">
<meta property="og:title" content="Wang&#39;s Blog">
<meta property="og:url" content="https://wanglinyong.github.io/index.html">
<meta property="og:site_name" content="Wang&#39;s Blog">
<meta property="og:description" content="JAVA，Python，C#，Node.js，个人博客，Github，hexo">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wang&#39;s Blog">
<meta name="twitter:description" content="JAVA，Python，C#，Node.js，个人博客，Github，hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/wanglinyong.github.io/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wanglinyong.github.io/"/>





  <title>Wang's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?your_id";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	<a href="https://github.com/wanglinyong/wanglinyong.github.io/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/wanglinyong.github.io/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wang's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/wanglinyong.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/wanglinyong.github.io/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/wanglinyong.github.io/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/wanglinyong.github.io/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/wanglinyong.github.io/about/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/05/18/c#借助阿里大于发送短信/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/05/18/c#借助阿里大于发送短信/" itemprop="url">C# 借助阿里大于平台发送短信</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-18T20:30:18+08:00">
                2018-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C#</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/05/18/c#借助阿里大于发送短信/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/05/18/c#借助阿里大于发送短信/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、首先申请签名和模板"><a href="#一、首先申请签名和模板" class="headerlink" title="一、首先申请签名和模板"></a>一、首先申请签名和模板</h1><p>1.登陆阿里云官网，找到短信服务，开通以后进入管理控制台，找到签名管理，申请一个签名，如下图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ali-1.png" alt=""></p>
<p>2.然后找到模板管理，申请一个模板，模板里都有格式内容介绍，申请好以后大概是这样：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ali-8.png" alt=""></p>
<p>3.签名名称和模板CODE等会代码中会用到，还有Access Key ID 和 Access Key Secret也要用到，Access Key在个人信息的下拉列表里可以找到，如下图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ali-3.png" alt=""></p>
<h1 id="二、下载-Net平台下的SDK"><a href="#二、下载-Net平台下的SDK" class="headerlink" title="二、下载.Net平台下的SDK"></a>二、下载.Net平台下的SDK</h1><p>1.点击短信服务列表中的帮助文档</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ali-4.png" alt=""></p>
<p>2.点击SDK下载，进入到SDK及DEMO下载页面，找到第4个[NET],点击即可下载。</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ali-5.png" alt=""></p>
<p>3.将下载好的压缩包进行解压，找到msg_demo目录，在/msg_demo/alicom-mns-receive有发送短信的demo和dll文件</p>
<h1 id="三、发短信的具体实现"><a href="#三、发短信的具体实现" class="headerlink" title="三、发短信的具体实现"></a>三、发短信的具体实现</h1><p>1.将/msg_demo/alicom-mns-receive/dll目录下的4个dll文件拷贝到你的项目目录下</p>
<p>2.在你项目的引用右键添加引用，打开引用管理器，如图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ali-6.png" alt=""></p>
<p>3.点击浏览，将阿里大于依赖的4个dll文件添加进来，然后点击确定。</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ali-7.png" alt=""></p>
<p>4.将/msg_demo/alicom-mns-receive下的sendsms文件拷贝到你的项目中，将其中Access Key ID 、 Access Key Secret、签名名称、模板CODE替换成你自己的即可，还有接收短信的手机号，模板内容等，可以将main函数改成一个方法sendMsg(string phone,string code)，直接调用方法即可，参数改为接收短信的手机号和短信内容：</p>
<pre><code>namespace ConsoleApplication1
{
class sendsms
{
    static String product = &quot;Dysmsapi&quot;;//短信API产品名称
    static String domain = &quot;dysmsapi.aliyuncs.com&quot;;//短信API产品域名
    static String accessId = &quot;你的Key&quot;;
    static String accessSecret = &quot;你的Secret&quot;;
    static String regionIdForPop = &quot;cn-hangzhou&quot;;
   public  static void sendMsg(string phone,string code)
    {


        IClientProfile profile = DefaultProfile.GetProfile(regionIdForPop, accessId, accessSecret);
        DefaultProfile.AddEndpoint(regionIdForPop, regionIdForPop, product, domain);
        IAcsClient acsClient = new DefaultAcsClient(profile);
        SendSmsRequest request = new SendSmsRequest();
        try
        {
            //request.SignName = &quot;上云预发测试&quot;;//&quot;管理控制台中配置的短信签名（状态必须是验证通过）&quot;
            //request.TemplateCode = &quot;SMS_71130001&quot;;//管理控制台中配置的审核通过的短信模板的模板CODE（状态必须是验证通过）&quot;
            //request.RecNum = &quot;13567939485&quot;;//&quot;接收号码，多个号码可以逗号分隔&quot;
            //request.ParamString = &quot;{\&quot;name\&quot;:\&quot;123\&quot;}&quot;;//短信模板中的变量；数字需要转换为字符串；个人用户每个变量长度必须小于15个字符。&quot;
            //SingleSendSmsResponse httpResponse = client.GetAcsResponse(request);
            request.PhoneNumbers = phone;//接收短信的手机号
            request.SignName = &quot;签名名称&quot;;
            request.TemplateCode = &quot;模板CODE&quot;;
            request.TemplateParam = &quot;{\&quot;code\&quot;:\&quot;&quot; + code + &quot;\&quot;}&quot;;//模板内容
           // request.OutId = &quot;xxxxxxxx&quot;;  //可选:outId为提供给业务方扩展字段,最终在短信回执消息中将此值带回给调用者
            //请求失败这里会抛ClientException异常
            SendSmsResponse sendSmsResponse = acsClient.GetAcsResponse(request);
            System.Console.WriteLine(sendSmsResponse.Message);

        }
        catch (ServerException e)
        {
            System.Console.WriteLine(&quot;ServerException&quot;);
        }
        catch (ClientException e)
        {
            System.Console.WriteLine(&quot;ClientException&quot;);
        }
    }
}
}
</code></pre><p>5.运行程序，调用发送短信方法进行测试，测试成功！</p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/05/11/微信小程序日期格式化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/05/11/微信小程序日期格式化/" itemprop="url">微信小程序日期格式化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-11T20:15:18+08:00">
                2018-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/微信小程序/" itemprop="url" rel="index">
                    <span itemprop="name">微信小程序</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/05/11/微信小程序日期格式化/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/05/11/微信小程序日期格式化/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-微信小程序util-js下有一个日期格式化函数"><a href="#1-微信小程序util-js下有一个日期格式化函数" class="headerlink" title="1.微信小程序util.js下有一个日期格式化函数"></a>1.微信小程序util.js下有一个日期格式化函数</h2><pre><code>const formatTime = date =&gt; {
  var date = new Date(date);  
  const year = date.getFullYear()
  const month = date.getMonth() + 1
  const day = date.getDate()
  const hour = date.getHours()
  const minute = date.getMinutes()
  const second = date.getSeconds()

  return [year, month, day].map(formatNumber).join(&apos;-&apos;) + &apos; &apos; + [hour, minute, second].map(formatNumber).join(&apos;:&apos;)
}

module.exports = {
  formatTime: formatTime
}
</code></pre><p>但是它原来是没有下面的这段代码的  它要求传入的data是一个日期参数，为了方便将日期字符串作为参数传递，将date转换一下（这里的参数date就是日期字符串）：</p>
<pre><code>var date = new Date(date);  
</code></pre><h2 id="2-获取后台的list列表数据后，遍历对其进行日期格式化："><a href="#2-获取后台的list列表数据后，遍历对其进行日期格式化：" class="headerlink" title="2.获取后台的list列表数据后，遍历对其进行日期格式化："></a>2.获取后台的list列表数据后，遍历对其进行日期格式化：</h2><p>引入util.js</p>
<pre><code>var util = require(&apos;../../utils/util.js&apos;);
</code></pre><p>评论列表日期格式化代码：</p>
<pre><code>  if (res.data.result == 0) {
  let comms = res.data.lists
  console.log(comms)
  for(let c in comms){
    let  date = util.formatTime(comms[c].ctime)
    comms[c].ctime = date
  }
  that.setData({
    commentList: comms || [],
    bookIsBuy: res.data.is_buy
  });

  setTimeout(function () {
    that.setData({
      commentLoading: false
    });
  }, 500);

} 
</code></pre><p>调用util.js中的方法</p>
<pre><code>let  date = util.formatTime(comms[c].ctime)
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/05/10/微信小程序Java登录流程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/05/10/微信小程序Java登录流程/" itemprop="url">微信小程序Java登录流程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-10T20:48:25+08:00">
                2018-05-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/微信小程序/" itemprop="url" rel="index">
                    <span itemprop="name">微信小程序</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/05/10/微信小程序Java登录流程/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/05/10/微信小程序Java登录流程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、登录流程图"><a href="#一、登录流程图" class="headerlink" title="一、登录流程图"></a>一、登录流程图</h1><p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/wx-login.png" alt=""></p>
<h1 id="二、微信小程序端"><a href="#二、微信小程序端" class="headerlink" title="二、微信小程序端"></a>二、微信小程序端</h1><pre><code>doLogin:function(callback = () =&gt;{}){
let that = this;
wx.login({
  success:function(loginRes){
    if(loginRes){
      //获取用户信息
      wx.getUserInfo({
        withCredentials:true,//非必填  默认为true
        success:function(infoRes){
          console.log(infoRes,&apos;&gt;&gt;&gt;&apos;);
          //请求服务端的登录接口
          wx.request({
            url: api.loginUrl,
            data:{
              code:loginRes.code,//临时登录凭证
              rawData:infoRes.rawData,//用户非敏感信息
              signature:infoRes.signature,//签名
              encrypteData:infoRes.encryptedData,//用户敏感信息
              iv:infoRes.iv//解密算法的向量
            },
            success:function(res){
              console.log(&apos;login success&apos;);
              res = res.data;
              if(res.result==0){
                that.globalData.userInfo = res.userInfo;
                wx.setStorageSync(&apos;userInfo&apos;,JSON.stringify(res.userInfo));
                wx.setStorageSync(&apos;loginFlag&apos;,res.skey);
                console.log(&quot;skey=&quot;+res.skey);
                callback();
              }else{
                that.showInfo(&apos;res.errmsg&apos;);
              }
            },
            fail:function(error){
              //调用服务端登录接口失败
             // that.showInfo(&apos;调用接口失败&apos;);
              console.log(error);
            }
          });
        }
      });
    }else{

    }
  }
});
}
</code></pre><p>微信小程序端发起登录请求，携带的参数主要有：</p>
<pre><code>code:loginRes.code,//临时登录凭证
rawData:infoRes.rawData,//用户非敏感信息
signature:infoRes.signature,//签名
encrypteData:infoRes.encryptedData,//用户敏感信息
iv:infoRes.iv//解密算法的向量
</code></pre><p>需要的数据主要有：</p>
<pre><code>result、userInfo和skey
</code></pre><p>result用来判断是否登录成功，userInfo是用户的一些信息，保存在缓存中，不用每次都从后台获取，skey是用户登录态标识，也放在缓存中，如果skey存在就直接登录，维护用户的登录状态，具有时效性</p>
<h1 id="三、Java后台"><a href="#三、Java后台" class="headerlink" title="三、Java后台"></a>三、Java后台</h1><pre><code>@ResponseBody
@RequestMapping(&quot;/login&quot;)
public Map&lt;String,Object&gt; doLogin(Model model,
                                  @RequestParam(value = &quot;code&quot;,required = false) String code,
                                  @RequestParam(value = &quot;rawData&quot;,required = false) String rawData,
                                  @RequestParam(value = &quot;signature&quot;,required = false) String signature,
                                  @RequestParam(value = &quot;encrypteData&quot;,required = false) String encrypteData,
                                  @RequestParam(value = &quot;iv&quot;,required = false) String iv){
    log.info( &quot;Start get SessionKey&quot; );


    Map&lt;String,Object&gt; map = new HashMap&lt;String, Object&gt;(  );
    System.out.println(&quot;用户非敏感信息&quot;+rawData);

    JSONObject rawDataJson = JSON.parseObject( rawData );

    System.out.println(&quot;签名&quot;+signature);
    JSONObject SessionKeyOpenId = getSessionKeyOrOpenId( code );
    System.out.println(&quot;post请求获取的SessionAndopenId=&quot;+SessionKeyOpenId);

    String openid = SessionKeyOpenId.getString(&quot;openid&quot; );

    String sessionKey = SessionKeyOpenId.getString( &quot;session_key&quot; );

    System.out.println(&quot;openid=&quot;+openid+&quot;,session_key=&quot;+sessionKey);

    User user = userService.findByOpenid( openid );
    //uuid生成唯一key
    String skey = UUID.randomUUID().toString();
    if(user==null){
        //入库
        String nickName = rawDataJson.getString( &quot;nickName&quot; );
        String avatarUrl = rawDataJson.getString( &quot;avatarUrl&quot; );
        String gender  = rawDataJson.getString( &quot;gender&quot; );
        String city = rawDataJson.getString( &quot;city&quot; );
        String country = rawDataJson.getString( &quot;country&quot; );
        String province = rawDataJson.getString( &quot;province&quot; );


        user = new User();
        user.setUid( openid );
        user.setCreateTime( new Date(  ) );
        user.setSessionkey( sessionKey );
        user.setUbalance( 0 );
        user.setSkey( skey );
        user.setUaddress( country+&quot; &quot;+province+&quot; &quot;+city );
        user.setUavatar( avatarUrl );
        user.setUgender( Integer.parseInt( gender ) );
        user.setUname( nickName );
        user.setUpdateTime( new Date(  ) );

        userService.insert( user );
    }else {
        //已存在
        log.info( &quot;用户openid已存在,不需要插入&quot; );
    }
    //根据openid查询skey是否存在
    String skey_redis = (String) redisTemplate.opsForValue().get( openid );
    if(StringUtils.isNotBlank( skey_redis )){
        //存在 删除 skey 重新生成skey 将skey返回
        redisTemplate.delete( skey_redis );

    }
        //  缓存一份新的
        JSONObject sessionObj = new JSONObject(  );
        sessionObj.put( &quot;openId&quot;,openid );
        sessionObj.put( &quot;sessionKey&quot;,sessionKey );
        redisTemplate.opsForValue().set( skey,sessionObj.toJSONString() );
        redisTemplate.opsForValue().set( openid,skey );

        //把新的sessionKey和oppenid返回给小程序
        map.put( &quot;skey&quot;,skey );



    map.put( &quot;result&quot;,&quot;0&quot; );



    JSONObject userInfo = getUserInfo( encrypteData, sessionKey, iv );
    System.out.println(&quot;根据解密算法获取的userInfo=&quot;+userInfo);
    userInfo.put( &quot;balance&quot;,user.getUbalance() );
    map.put( &quot;userInfo&quot;,userInfo );

    return map;
}
</code></pre><p>获取openid和sessionKey方法</p>
<pre><code>public static JSONObject getSessionKeyOrOpenId(String code){
    //微信端登录code
    String wxCode = code;
    String requestUrl = &quot;https://api.weixin.qq.com/sns/jscode2session&quot;;
    Map&lt;String,String&gt; requestUrlParam = new HashMap&lt;String, String&gt;(  );
    requestUrlParam.put( &quot;appid&quot;,&quot;你的小程序appId&quot; );//小程序appId
    requestUrlParam.put( &quot;secret&quot;,&quot;你的小程序appSecret&quot; );
    requestUrlParam.put( &quot;js_code&quot;,wxCode );//小程序端返回的code
    requestUrlParam.put( &quot;grant_type&quot;,&quot;authorization_code&quot; );//默认参数

    //发送post请求读取调用微信接口获取openid用户唯一标识
    JSONObject jsonObject = JSON.parseObject( UrlUtil.sendPost( requestUrl,requestUrlParam ));
    return jsonObject;
}
</code></pre><p>解密用户敏感数据获取用户信息</p>
<pre><code>public static JSONObject getUserInfo(String encryptedData,String sessionKey,String iv){
    // 被加密的数据
    byte[] dataByte = Base64.decode(encryptedData);
    // 加密秘钥
    byte[] keyByte = Base64.decode(sessionKey);
    // 偏移量
    byte[] ivByte = Base64.decode(iv);
    try {
        // 如果密钥不足16位，那么就补足.  这个if 中的内容很重要
        int base = 16;
        if (keyByte.length % base != 0) {
            int groups = keyByte.length / base + (keyByte.length % base != 0 ? 1 : 0);
            byte[] temp = new byte[groups * base];
            Arrays.fill(temp, (byte) 0);
            System.arraycopy(keyByte, 0, temp, 0, keyByte.length);
            keyByte = temp;
        }
        // 初始化
        Security.addProvider(new BouncyCastleProvider());
        Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS7Padding&quot;,&quot;BC&quot;);
        SecretKeySpec spec = new SecretKeySpec(keyByte, &quot;AES&quot;);
        AlgorithmParameters parameters = AlgorithmParameters.getInstance(&quot;AES&quot;);
        parameters.init(new IvParameterSpec(ivByte));
        cipher.init( Cipher.DECRYPT_MODE, spec, parameters);// 初始化
        byte[] resultByte = cipher.doFinal(dataByte);
        if (null != resultByte &amp;&amp; resultByte.length &gt; 0) {
            String result = new String(resultByte, &quot;UTF-8&quot;);
            return JSON.parseObject(result);
        }
    } catch (NoSuchAlgorithmException e) {
        log.error(e.getMessage(), e);
    } catch (NoSuchPaddingException e) {
        log.error(e.getMessage(), e);
    } catch (InvalidParameterSpecException e) {
        log.error(e.getMessage(), e);
    } catch (IllegalBlockSizeException e) {
        log.error(e.getMessage(), e);
    } catch (BadPaddingException e) {
        log.error(e.getMessage(), e);
    } catch (UnsupportedEncodingException e) {
        log.error(e.getMessage(), e);
    } catch (InvalidKeyException e) {
        log.error(e.getMessage(), e);
    } catch (InvalidAlgorithmParameterException e) {
        log.error(e.getMessage(), e);
    } catch (NoSuchProviderException e) {
        log.error(e.getMessage(), e);
    }
    return null;
}
</code></pre><h1 id="四、流程"><a href="#四、流程" class="headerlink" title="四、流程"></a>四、流程</h1><p>1.小程序端发起请求并携带主要参数</p>
<p>2.java后台接到/login请求后，根据code去调用微信接口获取用户唯一标识openid和sessionKey</p>
<p>3.根据openid查询mysql数据库，判断该用户是否存在，如果不存在将用户非敏感信息和其他初始化数据存入到数据库中，如果已存在，不操作</p>
<p>4.根据openid查询redis数据库，判断openid对应的skey是否存在，如果存在则删除原来老的skey以及对应的openid和sessionKey</p>
<p>5.通过uuid生成唯一的skey，用openid做键，skey做值，存入到redis中</p>
<p>6.然后把skey做键，openid和sessionKey的json串做值也重新存入到redis中</p>
<p>7.根据解密算法，参数有encryptedData、sessionKey和iv，获取用户信息userInfo,如果userInfo字段不满足需要，可通过userInfo.put( “balance”,user.getUbalance() );添加所需要的字段和值</p>
<p>8.将微信小程序需要的数据封装到map中，返回给小程序端</p>
<pre><code>map.put( &quot;skey&quot;,skey );

map.put( &quot;result&quot;,&quot;0&quot; );

map.put( &quot;userInfo&quot;,userInfo );    

return map;
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/05/10/Whistle/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/05/10/Whistle/" itemprop="url">web调试代理工具Whistle</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-05-10T20:15:18+08:00">
                2018-05-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/whistle/" itemprop="url" rel="index">
                    <span itemprop="name">whistle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/05/10/Whistle/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/05/10/Whistle/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>由于最近在学习微信小程序开发，项目中用到了https代理请求，所以用到了基于Node实现的跨平台web调试代理工具Whistle，在此做一记录。</p>
<p>完成https代理请求总共需要5个步骤。</p>
<h1 id="一、安装Node-js"><a href="#一、安装Node-js" class="headerlink" title="一、安装Node.js"></a>一、安装Node.js</h1><p>下载地址：</p>
<pre><code>https://nodejs.org/en/
</code></pre><p>下载长期支持版：LTS版本</p>
<p>下载后按步骤进行安装，安装完成后打开cmd命令窗口，执行</p>
<pre><code>$ node -v
</code></pre><p>查看版本号，如果出现版本号即安装正确。</p>
<pre><code>v8.11.1
</code></pre><h1 id="二、安装并启动Whistle"><a href="#二、安装并启动Whistle" class="headerlink" title="二、安装并启动Whistle"></a>二、安装并启动Whistle</h1><h2 id="1-安装Whistle"><a href="#1-安装Whistle" class="headerlink" title="1.安装Whistle"></a>1.安装Whistle</h2><p>打开cmd命令窗口，执行</p>
<pre><code>$ npm install -g whistle
</code></pre><p>npm默认镜像是在国外，有时候安装速度很慢或者出现安装不了的情况，如果无法安装或者安装很慢，可以使用taobao的镜像安装：</p>
<pre><code>$ npm install cnpm -g --registry=https://registry.npm.taobao.org
$ cnpm install -g whistle
</code></pre><p>或者直接指定镜像安装：</p>
<pre><code>$ npm install whistle -g --registry=https://registry.npm.taobao.org
</code></pre><h2 id="2-启动Whistle"><a href="#2-启动Whistle" class="headerlink" title="2.启动Whistle"></a>2.启动Whistle</h2><p>在cmd命令窗口中执行启动命令：</p>
<pre><code>w2 start
</code></pre><p>停止命令：</p>
<pre><code>w2 stop
</code></pre><p>重启命令：</p>
<pre><code>w2 restart
</code></pre><h2 id="3-访问Whistle-访问网址："><a href="#3-访问Whistle-访问网址：" class="headerlink" title="3.访问Whistle,访问网址："></a>3.访问Whistle,访问网址：</h2><pre><code>127.0.0.1:8899
</code></pre><h2 id="三、配置代理"><a href="#三、配置代理" class="headerlink" title="三、配置代理"></a>三、配置代理</h2><p>打开控制面板–&gt;网络和 Internet–&gt;Internet 选项–&gt;连接–&gt;局域网设置</p>
<p>勾选 为LAN使用代理服务器</p>
<pre><code>地址(E): 127.0.0.1 端口(T): 8899
</code></pre><p>然后确定配置。</p>
<p>如下图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/whistle.png" alt=""></p>
<p>此时就可以配置http请求转发了</p>
<p>1.打开whistle网页（127.0.0.1:8899）</p>
<p>2.在Rules规则中有一个默认的Default窗口，在此可以配置转发请求</p>
<pre><code>www.myurl.com 127.0.0.1:8080
</code></pre><p>这样访问www.myurl.com就会访问127.0.0.1:8080这个地址</p>
<p>如果不在Default窗口配置，也可以自己新建一个，点击Create创建</p>
<p>这样只能代理非https请求  如果想代理https请求还得下载https安全证书</p>
<h1 id="四、下载https安全证书"><a href="#四、下载https安全证书" class="headerlink" title="四、下载https安全证书"></a>四、下载https安全证书</h1><p>点击whistle网页上的HTTPS,会出现一个二维码，在二维码上方有一个Download RootCA,点击下载，在二维码下方有一个Capture HTTPS CONNECTs单选框，勾选表明拦截HTTPS请求。如图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/whistle-2.png" alt=""></p>
<p>htpps安全证书下载好以后，打开 –&gt;安装证书–&gt;将所有的证书放入下列存储–&gt;受信任的根证书颁发机构。如下图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/whistle-3.png" alt=""></p>
<p>下载安装完成以后得重新配置转发请求。</p>
<h2 id="五、配置请求转发"><a href="#五、配置请求转发" class="headerlink" title="五、配置请求转发"></a>五、配置请求转发</h2><p>如果配置成：</p>
<pre><code>https://www.myurl.com 127.0.0.1:8080
</code></pre><p>会报下面的错误</p>
<pre><code>From: whistle@1.9.10
Node: v8.11.1
Date: 2018-5-4 09:31:21
Error: write EPROTO 101057795:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol:openssl\ssl\s23_clnt.c:827:

at _errnoException (util.js:1022:11)
at WriteWrap.afterWrite [as oncomplete] (net.js:880:14)
</code></pre><p>是因为没办法用https请求去访问http服务器，改成下面的配置就OK</p>
<pre><code>www.myurl.com 127.0.0.1:8080 http://www.myurl.com
</code></pre><p>这样访问<a href="https://www.myurl.com" target="_blank" rel="external">https://www.myurl.com</a> 就可以访问127.0.0.1:8080这个地址了。</p>
<p>记得开启拦截HTTPS：勾选 Capture HTTPS CONNECTs</p>
<p>点击Network可以查看请求信息，如下图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/whistle-4.png" alt=""></p>
<p>这只是Whistle的冰山一角，了解更多功能请访问：</p>
<pre><code>http://wproxy.org/whistle/
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/04/27/linux文件服务器httpd开机自启动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/04/27/linux文件服务器httpd开机自启动/" itemprop="url">linux文件服务器httpd开机自启动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-27T20:15:18+08:00">
                2018-04-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/04/27/linux文件服务器httpd开机自启动/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/27/linux文件服务器httpd开机自启动/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、相关命令"><a href="#一、相关命令" class="headerlink" title="一、相关命令"></a>一、相关命令</h1><p>1.查看所有系统服务</p>
<pre><code>systemctl list-units --all --type=service
</code></pre><p>2.查询服务状态</p>
<pre><code>systemctl status httpd.service
</code></pre><p>3.查询服务是否为开机启动</p>
<pre><code>systemctl is-enabled httpd.service
</code></pre><p>enabled是 disabled否</p>
<p>4.设置服务为开机启动状态</p>
<pre><code>systemctl enable httpd.service
</code></pre><p>会自动创建一个系统链接</p>
<pre><code>Created symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.
</code></pre><p>5.设置服务为开机不启动状态</p>
<p>systemctl disable httpd.service</p>
<p>会自动移除系统链接</p>
<pre><code>Removed symlink /etc/systemd/system/multi-user.target.wants/httpd.service.
</code></pre><p>二、设置httpd开机自启动</p>
<pre><code>systemctl enable httpd.service
</code></pre><p>重启即可。</p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/04/22/linux系统mysql的远程访问/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/04/22/linux系统mysql的远程访问/" itemprop="url">linux系统mysql的远程访问</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-22T10:46:18+08:00">
                2018-04-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/04/22/linux系统mysql的远程访问/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/22/linux系统mysql的远程访问/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、创建用户设置权限"><a href="#一、创建用户设置权限" class="headerlink" title="一、创建用户设置权限"></a>一、创建用户设置权限</h1><p>以root身份登录mysql</p>
<pre><code>[root@ ~]mysql -uroot -p

[root@ ~]Enter password: xxxxxx
</code></pre><p>创建用户</p>
<pre><code>mysql&gt;create user &apos;wanglinyong&apos;@&apos;%&apos; identified by &apos;wanglinyong9527&apos;;
</code></pre><p>授权</p>
<pre><code>mysql&gt;grant all privileges on *.* to &apos;wanglinyong&apos;@&apos;%&apos; identified by &apos;wanglinyong9527&apos; with grant option;
</code></pre><p>其中’wanglinyong’@’%’是允许该用户在任何主机上远程连接，如果只允许在某一台主机上连接，可指定ip</p>
<pre><code>mysql&gt;grant all privileges on *.* to &apos;wanglinyong&apos;@&apos;10.xx.xx.x&apos; identified by &apos;wanglinyong9527&apos; with grant option;
</code></pre><p>授权之后记得要刷新权限</p>
<pre><code>mysql&gt;flush privileges;
</code></pre><h1 id="二、Navicate远程连接测试"><a href="#二、Navicate远程连接测试" class="headerlink" title="二、Navicate远程连接测试"></a>二、Navicate远程连接测试</h1><p>1.如果连接失败，提示：</p>
<pre><code>1045-Access denied for user&apos;wanglinyong&apos;@&apos;ip&apos;(using password:YES)
</code></pre><p>则表示密码输入错误。</p>
<p>2.如果提示：</p>
<pre><code>ERROR 2003(HY000): Can’t connect to MySQL server on xxxxx
</code></pre><p>如果服务器是阿里云的，可能没有开通3306端口，要去服务器上添加安全组，增加3360端口即可</p>
<p>3.Navicate连接成功后，只有information_schema一个数据库</p>
<p>在linux系统以root用户登录</p>
<p>先查一下其他数据库是否被删除</p>
<pre><code>mysql&gt;show databases;
</code></pre><p>如果还在，查看下mysql库的用户表</p>
<pre><code>mysql&gt;select host,user from mysql.user;
</code></pre><p>结果如下：</p>
<pre><code>+----------------+-----------------+
| host           | user            |
+----------------+-----------------+
| %              | wanglinyong     |
| localhost      | mysql.session   |
| localhost      | root            |
+----------------+-----------------+
3 rows in set (0.00 sec)
</code></pre><p>说明wanglinyong用户允许在任何远程主机登录</p>
<p>然后查看，远程登录的用户是否有权限</p>
<pre><code>mysql&gt; show grants for &apos;wanglinyong&apos;@&apos;%&apos;;
</code></pre><p>结果不是</p>
<pre><code>GRANT ALL PRIVILEGES ON *.* TO &apos;wanglinyong5112&apos;@&apos;%&apos; WITH GRANT OPTION 
</code></pre><p>说明权限不够，重新授权</p>
<pre><code>mysql&gt;grant all privileges on *.* to &apos;wanglinyong&apos;@&apos;%&apos; identified by &apos;wanglinyong9527&apos; with grant option;
</code></pre><p>刷新权限：</p>
<pre><code>mysql&gt;flush privileges;
</code></pre><p>重新连接应该就OK了！</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>如果还不行, vi /etc/mysql/mysql.conf.d/mysqld.cnf,检查下是否有</p>
<pre><code>bind-address = 127.0.0.1
</code></pre><p>如果有，请把它注释掉（加#号注释）。如果找不到mysqld.cnf,有的可能在 /etc/my.cnf文件内</p>
<p>保存退出后重启mysql服务</p>
<pre><code>sudo /etc/init.d/mysql restart
</code></pre><p>或者</p>
<pre><code>systemctl restart mysqld
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/04/17/JAVA十六进制数据接收与传输/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/04/17/JAVA十六进制数据接收与传输/" itemprop="url">JAVA十六进制数据接收与传输</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-17T22:28:56+08:00">
                2018-04-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/04/17/JAVA十六进制数据接收与传输/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/17/JAVA十六进制数据接收与传输/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>由于项目中经常遇到与设备进行交互获取数据，不仅有Python版本、还有Java版本，还可能会有C#版本，在此做个记录。</p>
<h1 id="一、十六进制转换工具类"><a href="#一、十六进制转换工具类" class="headerlink" title="一、十六进制转换工具类"></a>一、十六进制转换工具类</h1><p>主要包含十六进制字符串转ASCII，ASCII转十六进制字符串以及十六进制字符串转Byte数组等方法：</p>
<pre><code> /**
   * Created by wly on 2018/4/17.
  */
public class HexConvert {

public static String  convertStringToHex(String str){

char[] chars = str.toCharArray();

StringBuffer hex = new StringBuffer();
for(int i = 0; i &lt; chars.length; i++){
    hex.append(Integer.toHexString((int)chars[i]));
}

return hex.toString();
}

public static String convertHexToString(String hex){

StringBuilder sb = new StringBuilder();
StringBuilder sb2 = new StringBuilder();

for( int i=0; i&lt;hex.length()-1; i+=2 ){

    String s = hex.substring(i, (i + 2));           
    int decimal = Integer.parseInt(s, 16);          
    sb.append((char)decimal);
    sb2.append(decimal);
}

return sb.toString();
}
public static byte[] hexStringToBytes(String hexString) {
    if (hexString == null || hexString.equals(&quot;&quot;)) {
            return null;
}
        // toUpperCase将字符串中的所有字符转换为大写
        hexString = hexString.toUpperCase();
        int length = hexString.length() / 2;
        // toCharArray将此字符串转换为一个新的字符数组。
    char[] hexChars = hexString.toCharArray();
    byte[] d = new byte[length];
for (int i = 0; i &lt; length; i++) {
    int pos = i * 2;
    d[i] = (byte) (charToByte(hexChars[pos]) &lt;&lt; 4 | charToByte(hexChars[pos + 1]));
}
        return d;
}
    //返回匹配字符
private static byte charToByte(char c) {
    return (byte) &quot;0123456789ABCDEF&quot;.indexOf(c);
}

//将字节数组转换为short类型，即统计字符串长度
public static short bytes2Short2(byte[] b) {
       short i = (short) (((b[1] &amp; 0xff) &lt;&lt; 8) | b[0] &amp; 0xff);
    return i;
}
//将字节数组转换为16进制字符串
public static String BinaryToHexString(byte[] bytes) {
    String hexStr = &quot;0123456789ABCDEF&quot;;
    String result = &quot;&quot;;
    String hex = &quot;&quot;;
for (byte b : bytes) {
    hex = String.valueOf(hexStr.charAt((b &amp; 0xF0) &gt;&gt; 4));
    hex += String.valueOf(hexStr.charAt(b &amp; 0x0F));
    result += hex + &quot; &quot;;
}
return result;
}

public static void main(String[] args) {


System.out.println(&quot;======ASCII码转换为16进制======&quot;);
String str = &quot;*00007VERSION\\n1$&quot;;
System.out.println(&quot;字符串: &quot; + str);
String hex = HexConvert.convertStringToHex(str);
System.out.println(&quot;====转换为16进制=====&quot; + hex);

System.out.println(&quot;======16进制转换为ASCII======&quot;);
System.out.println(&quot;Hex : &quot; + hex);
System.out.println(&quot;ASCII : &quot; + HexConvert.convertHexToString(hex));

byte[] bytes = HexConvert.hexStringToBytes( hex );

System.out.println(HexConvert.BinaryToHexString( bytes ));
}
}
</code></pre><h1 id="二、接收数据"><a href="#二、接收数据" class="headerlink" title="二、接收数据"></a>二、接收数据</h1><pre><code>public class UdpReceiverThread {

public static void main(String[] args) throws Exception {
// 定义一个接收端，并且指定了接收的端口号
DatagramSocket socket = new DatagramSocket(6070);

while (true) {
byte[] buf = new byte[1024*5];
// 解析数据包
DatagramPacket packet = new DatagramPacket(buf, buf.length);

socket.receive(packet);

String ip = packet.getAddress().getHostAddress();

buf = packet.getData();

//将字节数组转换为16进制字符串
String hexString = HexConvert.BinaryToHexString( buf );//含有空格，如：2A 30 30 30 30 37 56 45 52 53 49 4F 4E 5C 6E 31 24 

hexString =  hexString.replace( &quot; &quot;,&quot;&quot; );//去除空格

String asc = HexConvert.convertHexToString( hexString );//转为ASCII,如：*00007VERSION\n1$

System.out.println(&quot;收到 &quot; + ip + &quot; 发来的消息：&quot; + asc);

}

}
}
</code></pre><h1 id="三、发送数据"><a href="#三、发送数据" class="headerlink" title="三、发送数据"></a>三、发送数据</h1><pre><code>public class UDPSenderThread {

public static void main(String[] args) throws Exception {
DatagramSocket socket = new DatagramSocket();

String serial = &quot;*00007VERSION\\n1$&quot;;//串口字符串

String hex = HexConvert.convertStringToHex(serial);//转化为十六进制字符串：2a303030303756455253494f4e5c6e3124

byte[] buf = HexConvert.hexStringToBytes( hex );//将十六进制字符串转为字节数组

//将数据打包
DatagramPacket packet = new DatagramPacket(buf, buf.length, InetAddress.getByName(&quot;192.168.11.139&quot;), 6070);

socket.send(packet);

socket.close();

}
}
</code></pre><h2 id="在此基础上进行封装、抽象后即可处理十六进制数据的传输与接收问题。"><a href="#在此基础上进行封装、抽象后即可处理十六进制数据的传输与接收问题。" class="headerlink" title="在此基础上进行封装、抽象后即可处理十六进制数据的传输与接收问题。"></a>在此基础上进行封装、抽象后即可处理十六进制数据的传输与接收问题。</h2>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/04/10/BadBoy+Jmeter压力测试/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/04/10/BadBoy+Jmeter压力测试/" itemprop="url">BadBoy+Jmeter压力测试</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-10T19:42:48+08:00">
                2018-04-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/性能测试/" itemprop="url" rel="index">
                    <span itemprop="name">性能测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/04/10/BadBoy+Jmeter压力测试/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/10/BadBoy+Jmeter压力测试/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、下载BadBoy和Jmeter"><a href="#一、下载BadBoy和Jmeter" class="headerlink" title="一、下载BadBoy和Jmeter"></a>一、下载BadBoy和Jmeter</h1><h2 id="1-下载链接"><a href="#1-下载链接" class="headerlink" title="1.下载链接"></a>1.下载链接</h2><p>BadBoy</p>
<pre><code>http://www.badboy.com.au/download/index
</code></pre><p>Jmeter</p>
<pre><code>http://jmeter.apache.org/download_jmeter.cgi
</code></pre><h2 id="2-下载过程如图"><a href="#2-下载过程如图" class="headerlink" title="2.下载过程如图"></a>2.下载过程如图</h2><p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/bd-1.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/bd-2.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/jm-1.png" alt=""></p>
<h2 id="3-解压并配置环境变量"><a href="#3-解压并配置环境变量" class="headerlink" title="3.解压并配置环境变量"></a>3.解压并配置环境变量</h2><p>将下载好的BadBoy和Jmeter解压到合适的地方</p>
<p>配置环境变量</p>
<pre><code>变量名称：JMETER_HOME

变量值：  G:\wly\apache-jmeter-4.0
</code></pre><p> 在classpath后面加入：                          </p>
<pre><code>%JMETER_HOME%\lib\ext\ApacheJMeter_core.jar;%JMETER_HOME%\lib\jorphan.jar;%JMETER_HOME%\lib\logkit-2.0.jar;
</code></pre><h2 id="二、录制Jmeter脚本"><a href="#二、录制Jmeter脚本" class="headerlink" title="二、录制Jmeter脚本"></a>二、录制Jmeter脚本</h2><h2 id="1-打开BadBoy"><a href="#1-打开BadBoy" class="headerlink" title="1.打开BadBoy"></a>1.打开BadBoy</h2><p>（1）点击badboy.exe ,打开BadBoy,界面如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/bd-3.png" alt=""></p>
<p>（2）输入URL，点击回车开始录制</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/bd-4.png" alt=""></p>
<p>（3）此时左侧script下多了一条记录，右侧出现调试页面的首页</p>
<p>然后点击登录，访问首页，然后退出，badboy界面如下，总共有五条记录</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/bd-5.png" alt=""></p>
<p>（4）接下来导出jmter脚本，点击</p>
<pre><code>file-&gt;Export to Jmeter
</code></pre><p>导出后缀为.jmx的文件</p>
<h2 id="2-打开Jmeter"><a href="#2-打开Jmeter" class="headerlink" title="2.打开Jmeter"></a>2.打开Jmeter</h2><p>（1）进入Jmeter的bin目录，点击jmeter.bat运行Jmeter</p>
<p>（2）File-&gt;Open打开刚才导出的jmeter脚本 界面如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/jm-2.png" alt=""></p>
<p>（3）Thread Group线程组就是定义并发数量的，step就是压测的步骤。<br>Number of Threads(users) 表示线程数量，如果设置为5000，就是模拟5000个人不断重复刚才的 首页-&gt;登录-&gt;首页-&gt;退出 操作</p>
<p>Ram-Up Period(in seconds)表示间隔时间</p>
<p>Loop Count 表示循环次数</p>
<p>压力测试：线程数越多压力越大，间隔时间越短压力越大</p>
<p>（4）添加监听器</p>
<p>添加聚合报告、查看结果树和用表格查看，如下图：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/jm-3.png" alt=""></p>
<p>（5）运行</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/jm-4.png" alt=""></p>
<p>（6）查看结果</p>
<p>查看结果树，如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/jm-5.png" alt=""></p>
<p>聚合报告，如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/jm-6.png" alt=""></p>
<p>表格查看，如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/jm-7.png" alt=""></p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/04/06/linux系统搭建文件服务器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/04/06/linux系统搭建文件服务器/" itemprop="url">linux系统搭建文件服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-06T10:48:23+08:00">
                2018-04-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/04/06/linux系统搭建文件服务器/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/04/06/linux系统搭建文件服务器/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一、安装-httpd-服务"><a href="#一、安装-httpd-服务" class="headerlink" title="一、安装 httpd 服务"></a>一、安装 httpd 服务</h2><pre><code>yum install httpd
</code></pre><p>查看版本号</p>
<pre><code>httpd -version
</code></pre><h2 id="二、启动-httpd-服务"><a href="#二、启动-httpd-服务" class="headerlink" title="二、启动 httpd 服务"></a>二、启动 httpd 服务</h2><pre><code>service httpd start
</code></pre><h2 id="三、容易出现的问题"><a href="#三、容易出现的问题" class="headerlink" title="三、容易出现的问题"></a>三、容易出现的问题</h2><p>1.防火墙未开放端口</p>
<pre><code>开启端口：firewall-cmd --zone=public --add-port=8989/tcp --permanent

重启防火墙：firewall-cmd --reload 

查看已开放端口：firewall-cmd --list-ports
</code></pre><p>2.端口被占用</p>
<pre><code>更改端口号
</code></pre><p>修改配置文件，默认路径是</p>
<pre><code>/etc/httpd/conf/httpd.conf 
</code></pre><p>主要修改以下内容</p>
<pre><code>Listen 80 --&gt; Listen 8987     #监听端口

#ServerName www.example.com:80 --&gt; ServerName 192.168.120.132:8987    #服务名称ip:port

DocumentRoot &quot;/var/www/html&quot; --&gt;  DocumentRoot &quot;/home/profile&quot;   #文件根目录

&lt;Directory &quot;/var/www/html&quot;&gt; ---&gt;  &lt;Directory &quot;/home/profile&quot;&gt;  #文件路径1

&lt;Directory &quot;/var/www/html&quot;&gt; ---&gt;  &lt;Directory &quot;/home/profile&quot;&gt;  #文件路径2
</code></pre><p>3.出现apache CentOS Permission denied: AH00072</p>
<p>关闭SELINUX</p>
<pre><code>setenforce 0
</code></pre><p>修改配置文件</p>
<pre><code>vim /etc/selinux/config

SELINUX=enforcing 改成--&gt; SELINUX=disabled
</code></pre><h2 id="四、启动服务"><a href="#四、启动服务" class="headerlink" title="四、启动服务"></a>四、启动服务</h2><pre><code>service httpd start
</code></pre><p>停止服务</p>
<pre><code>service httpd stop
</code></pre><h2 id="五、远程访问"><a href="#五、远程访问" class="headerlink" title="五、远程访问"></a>五、远程访问</h2><p>在浏览器中输入 ip:port 即可访问设置的 /home/profile 目录;</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/ftp.png" alt=""></p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/03/31/linux系统安装git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/03/31/linux系统安装git/" itemprop="url">linux系统安装git</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-31T14:36:00+08:00">
                2018-03-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/wanglinyong.github.io/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/03/31/linux系统安装git/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/31/linux系统安装git/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、安装git依赖包"><a href="#一、安装git依赖包" class="headerlink" title="一、安装git依赖包"></a>一、安装git依赖包</h1><pre><code>yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel gcc perl-ExtUtils-MakeMaker
</code></pre><h1 id="二、删除已有的git"><a href="#二、删除已有的git" class="headerlink" title="二、删除已有的git"></a>二、删除已有的git</h1><pre><code>yum remove git
</code></pre><h1 id="三、下载git源码"><a href="#三、下载git源码" class="headerlink" title="三、下载git源码"></a>三、下载git源码</h1><p>切换到你的包文件存放目录下</p>
<pre><code>　cd /home/softs
</code></pre><p>下载git安装包</p>
<pre><code>wget https://www.kernel.org/pub/software/scm/git/git-2.8.3.tar.gz
</code></pre><p>解压git安装包</p>
<pre><code>tar -zxvf git-2.8.3.tar.gz

cd git-2.8.3
</code></pre><p>配置git安装路径</p>
<pre><code>./configure prefix=/usr/local/git/
</code></pre><p>编译并且安装</p>
<pre><code>make &amp;&amp; make install
</code></pre><h1 id="四、将git指令添加到bash中"><a href="#四、将git指令添加到bash中" class="headerlink" title="四、将git指令添加到bash中"></a>四、将git指令添加到bash中</h1><pre><code>vi /etc/profile
</code></pre><p>在最后一行加入</p>
<pre><code>export PATH=$PATH:/usr/local/git/bin
</code></pre><p>让该配置文件立即生效</p>
<pre><code>source /etc/profile
</code></pre><p>查看git版本号</p>
<pre><code>git --version
</code></pre><p>git已经安装完毕 </p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/wanglinyong.github.io/page/2/">2</a><a class="page-number" href="/wanglinyong.github.io/page/3/">3</a><a class="extend next" rel="next" href="/wanglinyong.github.io/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">WangLinYong</p>
              <p class="site-description motion-element" itemprop="description">JAVA，Python，C#，Node.js，个人博客，Github，hexo</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/wanglinyong.github.io/archives/">
              
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/wanglinyong.github.io/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/wanglinyong.github.io/tags/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/wanglinyong.github.io/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/wanglinyong" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/yourname" target="_blank" title="Twitter">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WangLinYong</span>

  
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/wanglinyong.github.io/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/wanglinyong.github.io/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/wanglinyong.github.io/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/wanglinyong.github.io/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/wanglinyong.github.io/js/src/bootstrap.js?v=5.1.3"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"your_username"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/wanglinyong.github.io/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/wanglinyong.github.io/js/src/hook-duoshuo.js"></script>
  










  









  





  

  

  
  

  

  

  

</body>
</html>
