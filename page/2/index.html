<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/wanglinyong.github.io/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/wanglinyong.github.io/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/wanglinyong.github.io/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/wanglinyong.github.io/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/wanglinyong.github.io/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/wanglinyong.github.io/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/wanglinyong.github.io/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/wanglinyong.github.io/atom.xml" title="Wang's Blog" type="application/atom+xml" />






<meta name="description" content="JAVA，Python，C#，Node.js，个人博客，Github，hexo">
<meta property="og:type" content="website">
<meta property="og:title" content="Wang&#39;s Blog">
<meta property="og:url" content="https://wanglinyong.github.io/page/2/index.html">
<meta property="og:site_name" content="Wang&#39;s Blog">
<meta property="og:description" content="JAVA，Python，C#，Node.js，个人博客，Github，hexo">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wang&#39;s Blog">
<meta name="twitter:description" content="JAVA，Python，C#，Node.js，个人博客，Github，hexo">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/wanglinyong.github.io/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wanglinyong.github.io/page/2/"/>





  <title>Wang's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?your_id";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	<a href="https://github.com/wanglinyong/wanglinyong.github.io/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/wanglinyong.github.io/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wang's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/wanglinyong.github.io/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/wanglinyong.github.io/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/wanglinyong.github.io/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/wanglinyong.github.io/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/wanglinyong.github.io/about/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/01/23/csharp打开Excel文件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/01/23/csharp打开Excel文件/" itemprop="url">C# 打开Excel文件方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-23T19:43:06+08:00">
                2018-01-23
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/01/23/csharp打开Excel文件/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/23/csharp打开Excel文件/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、C-怎样打开Excel文件"><a href="#一、C-怎样打开Excel文件" class="headerlink" title="一、C#怎样打开Excel文件"></a>一、C#怎样打开Excel文件</h1><p>1.右键–Add DevExpress Item – New Item，新建一个Form窗体</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/e1.png" alt=""></p>
<p>2.打开工具箱，搜索spreadsheetControl</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/e2.png" alt=""></p>
<p>3.将工具spreadsheetControl拖入新建的窗体中</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/e3.png" alt=""></p>
<p>4.可添加打开，保存，打印等按钮，我是随窗体打开一起打开excel，所以没有添加按钮，主要代码如下：</p>
<pre><code>using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Linq;
using System.Threading.Tasks;
using System.Windows.Forms;
using DevExpress.XtraEditors;
using System.IO;
using DevExpress.Spreadsheet;

namespace rdms.Forms
{
public partial class frmARFCN : Form
{
    private static log4net.ILog LOG = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
    //记录窗体的名称
    readonly string mainFormText;

    public frmARFCN()
    {
        InitializeComponent();

        //记录窗体的名称，并实现文档变化事件的处理，方便显示新的文件名称
        mainFormText = this.Text;
        this.spreadsheetControl1.DocumentLoaded += new EventHandler(spreadsheetControl1_DocumentLoaded);
        openFile();
    }

    /// &lt;summary&gt;
    /// 文档变化后，实现对新文件名称的显示
    /// &lt;/summary&gt;
    void spreadsheetControl1_DocumentLoaded(object sender, EventArgs e)
    {
        string fileName = Path.GetFileName(this.spreadsheetControl1.Document.Path);
        if (String.IsNullOrEmpty(fileName))
        {
            Text = mainFormText;
        }
        else
        {
            Text = fileName + &quot; - &quot; + mainFormText;
        }
    }

    /// &lt;summary&gt;
    /// 打开Excel文件
    /// &lt;/summary&gt;
    private void openFile()
    {
        string path = Application.StartupPath;
        LOG.Info(&quot;path===&quot;+path);
        string filePath = path + &quot;\\Data\\about.xls&quot;;
        if (!string.IsNullOrEmpty(filePath))
        {
            IWorkbook workbook = spreadsheetControl1.Document;
            workbook.LoadDocument(filePath);
        }
    }

    /// &lt;summary&gt;
    /// 保存Excel文件
    /// &lt;/summary&gt;
    private void btnSaveFile_Click(object sender, EventArgs e)
    {
        spreadsheetControl1.SaveDocument();
    }

    /// &lt;summary&gt;
    /// Excel文件打印
    /// &lt;/summary&gt;
    private void btnPreview_Click(object sender, EventArgs e)
    {
        this.spreadsheetControl1.ShowPrintPreview();
    }
}
}
</code></pre><p>5.点击某个按钮弹出frmARFCN的form窗体</p>
<pre><code> private void btn_Click(object sender, EventArgs e)
{        
    using (frmARFCN frm = new frmARFCN())
    {
        DialogResult ret = frm.ShowDialog(this);
    }       
}
</code></pre><p>6.显示效果如下</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/e4.png" alt=""></p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/01/19/csharp改变行字体颜色或背景色/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/01/19/csharp改变行字体颜色或背景色/" itemprop="url">C# Gridview 改变行字体颜色或背景色</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-19T19:43:06+08:00">
                2018-01-19
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/01/19/csharp改变行字体颜色或背景色/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/19/csharp改变行字体颜色或背景色/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、根据列表数据改变行字体颜色或者背景色"><a href="#一、根据列表数据改变行字体颜色或者背景色" class="headerlink" title="一、根据列表数据改变行字体颜色或者背景色"></a>一、根据列表数据改变行字体颜色或者背景色</h1><p>1.ALT+ENTER键打开属性列表，根据Name.Color.Name获取颜色字符串</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/color.png" alt=""></p>
<pre><code>string color =  tePhone1.Color.Name;
</code></pre><p>2.将颜色字符串存入数据库，附上数据库Dao代码</p>
<pre><code>    namespace rdms.DB
   {
public class StudentDao
{
    private static ILog LOG = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);
    public static List&lt;Student&gt; GetAll()
    {
        return DBContext.ScodeSession.From&lt;Student&gt;().Select().ToList();
    }

    public static int Update(Student s)
    {        
        // DBContext.ScodeSession.FromSql(&quot;UPDATE  Student  SET  color = &apos;&quot;+s.color+ &quot;&apos; where s_id = &quot; + s.s_id);
        return DBContext.ScodeSession.Update(s);

    }

    public static Student getStudent(int id)
    {
        List&lt;Student&gt; list = DBContext.ScodeSession.FromSql(&quot;SELECT *  FROM Student  where s_id = &quot; + id).ToList&lt;Student&gt;();
        if (list != null &amp;&amp; list.Count &gt; 0)
        {
            return list[0];
        }
        else
        {
            return null;
        }
    }

    public static int Add(Student s)
    {
        return DBContext.ScodeSession.Insert(s);
    }

    public static void Delete(Student s)
    {
        DBContext.ScodeSession.Delete&lt;Student&gt;(s);
    }

}
</code></pre><p>}</p>
<p>3.在显示列表点击Run Designer，在事件列表中找到RowStyle,给一个事件名称</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/color3.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/color4.png" alt=""></p>
<p>4.具体实现代码如下</p>
<pre><code>//颜色字符串转颜色对象
public static Color GetColor(string ColorStr)
  {
      int ARGBvalue = 0;
      Color newColor = Color.FromName(ColorStr);
      if ((newColor.A + newColor.R + newColor.G + newColor.B) == 0)
      {
          int.TryParse(ColorStr, System.Globalization.NumberStyles.HexNumber, null, out ARGBvalue);
          newColor = Color.FromArgb(ARGBvalue);
      }
      return newColor;
  }

private void gridView2_RowStyle_2(object sender, RowStyleEventArgs e)
  {
      List&lt;Student&gt; list = StudentDao.GetAll();
      string name = &quot;&quot;;                    
      while(e.RowHandle &gt;= 0) {
          if (gridView2.GetRowCellValue(e.RowHandle, &quot;NAME&quot;)!=null) { //NAME为列的字段名fildName
             name = gridView2.GetRowCellValue(e.RowHandle, &quot;NAME&quot;).ToString();
          }

          if (list != null &amp;&amp; list.Count &gt; 0)
          {
              for (int i = 0; i &lt; list.Count; i++)
              {
                  Student s = list[i];                       
                  if (name != &quot;&quot; )
                  {
                      if (name.Equals(s.name))
                      {

                          Color color = GetColor(s.color);
                          e.Appearance.ForeColor = color;//改变字体颜色
                          //e.Appearance.BackColor = Color.Red;//改变背景色
                      }
                  }

              }
          }
                  break;
      }
  }
</code></pre><p>5.效果预览如下:</p>
<p>点击添加名单–选择颜色等</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/color1.png" alt=""></p>
<p>显示列表如下，根据条件显示字体颜色</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/color2.png" alt=""></p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/01/07/csharp Dockmanager窗体显示和隐藏/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/01/07/csharp Dockmanager窗体显示和隐藏/" itemprop="url">c# 利用Dockmanager工具使窗体显示和隐藏</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-07T19:28:32+08:00">
                2018-01-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/01/07/csharp Dockmanager窗体显示和隐藏/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/07/csharp Dockmanager窗体显示和隐藏/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.打开工具箱，选择Dockmanager工具，如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/panel1.png" alt=""></p>
<p>2.点击dockManager1的倒三角，点击Add bottom panel 在底部添加panel,如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/panel2.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/panel3.png" alt=""></p>
<p>3.可将内容添加到此panel窗体中，点击图钉按钮即可选择固定与否<br><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/panel4.png" alt=""></p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/01/05/sqlite获取一小时内数据sql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/01/05/sqlite获取一小时内数据sql/" itemprop="url">Sqlite 获取一小时内数据sql</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-05T11:08:05+08:00">
                2018-01-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/01/05/sqlite获取一小时内数据sql/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/05/sqlite获取一小时内数据sql/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>项目中用到了Sqlite数据库，需要查询距当前一小时内的数据，由于对Sqlite不熟，各种百度找答案，查到了很多日期函数，但是就是不起作用，最后经过摸索最终解决该问题，在此记录一下，有需要的小伙伴也可以看一下。</p>
<p>1.查询距当前时间一小时内的数据</p>
<pre><code>SELECT * FROM table_name t where datetime(t.create_time) &gt; datetime(&apos;now&apos;,&apos;-1 hour&apos;,&apos;localtime&apos;) 
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2018/01/02/csharp获取选中当前行/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2018/01/02/csharp获取选中当前行/" itemprop="url">c#GridView获取选中当前行</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-02T16:23:05+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2018/01/02/csharp获取选中当前行/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/02/csharp获取选中当前行/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、添加右击菜单"><a href="#一、添加右击菜单" class="headerlink" title="一、添加右击菜单"></a>一、添加右击菜单</h1><p>1、打开工具箱，选择ContextMenuStrip如下图</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/tool1.png" alt=""></p>
<p>2、可输入右键菜单名称及添加图标，如下图</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/tool2.png" alt=""></p>
<p>3、如果想在哪个窗口右击显示就在哪个窗口ALT+ENTER打开属性窗口，将<br>ContextMenuStrip选项的值设为刚才添加的名字，如下图</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/tool3.png" alt=""></p>
<p>4、双击右键添加的菜单即可添加单击事件</p>
<h1 id="二、添加回车Enter事件"><a href="#二、添加回车Enter事件" class="headerlink" title="二、添加回车Enter事件"></a>二、添加回车Enter事件</h1><p>1、在要添加回车事件的文本框ALT+ENTER打开属性窗口，如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/enter1.png" alt=""></p>
<p>2、将KeyDown选项的值填上触发回车事件的方法名，如下</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/enter2.png" alt=""></p>
<p>3、写入触发事件方法，如：</p>
<pre><code>private void txtPwd_KeyDown(object sender, KeyEventArgs e)
  {
      if (e.KeyCode == Keys.Enter)
      {
          this.btnSearch_Click(sender, e);//触发与点击按钮一样的效果
      }
  }
</code></pre><h1 id="三、获取选中行数据"><a href="#三、获取选中行数据" class="headerlink" title="三、获取选中行数据"></a>三、获取选中行数据</h1><p>1、右击AddToBlack后触发点击事件，代码如下</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/s1.png" alt=""></p>
<pre><code>private void addToBlackToolStripMenuItem_Click_1(object sender, EventArgs e)
 {
     int[] rows = gridView1.GetSelectedRows();
     rdms_ueidinfo info = null;
     if (rows.Length &gt; 0)
     {
         if (list != null &amp;&amp; list.Count &gt; 0)
         {
             info = list[rows[0]];
         }
         else
         {
             info = xxData.Ueidinfos[rows[0]];
         }
         Contact contact = new Contact();
         contact.IMSI = info.imsi;
         contact.IMEI = info.imei;
         DialogResult ret = DialogResult.Cancel;
         Cursor.Current = Cursors.WaitCursor;
         using (frmEditContact frm = new frmEditContact(contact, OwnerForm.Ribbon))
         {
             ret = frm.ShowDialog(OwnerForm);
         }
         Cursor.Current = Cursors.Default;
     }
 }
</code></pre><p>2、双击行获取选中行数据，代码如下</p>
<pre><code>    private void addToBlackListByDouble(object sender, EventArgs e)
{
    int[] rows = gridView1.GetSelectedRows();
    rdms_ueidinfo info = null;
    if (rows.Length &gt; 0)
    {
        if (list != null &amp;&amp; list.Count &gt; 0)
        {
             info = list[rows[0]];
        }
        else {
             info = xxData.Ueidinfos[rows[0]];
        }
        Contact contact = new Contact();
        contact.IMSI = info.imsi;
        contact.IMEI = info.imei;
        DialogResult ret = DialogResult.Cancel;
        Cursor.Current = Cursors.WaitCursor;
        using (frmEditContact frm = new frmEditContact(contact, OwnerForm.Ribbon))
        {
            ret = frm.ShowDialog(OwnerForm);
        }
        Cursor.Current = Cursors.Default;
    }

}
</code></pre><p>3、代码解释：</p>
<pre><code>rdms_ueidinfo info = null;
if (list != null &amp;&amp; list.Count &gt; 0)
           {
                info = list[rows[0]];
           }
           else {
                info = xxData.Ueidinfos[rows[0]];
           }
</code></pre><p>点击查询后，将根据查询条件查询的结果list再次显示到该列表，此时要获取选中行，就需要判断，如果list不为null表示当前列表是根据查询后显示的结果，否则就是初始列表，要做不同的判断才能选中想要的结果，之前一直选不中，甚是烦恼，真的是难者不会，会者不难，经过多次摸索才明白。</p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2017/12/10/csharp进度条/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2017/12/10/csharp进度条/" itemprop="url">C#通过Devexpress控件实现进度条功能</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-10T20:28:25+08:00">
                2017-12-10
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2017/12/10/csharp进度条/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/12/10/csharp进度条/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、Devexpress默认的等待提示框"><a href="#一、Devexpress默认的等待提示框" class="headerlink" title="一、Devexpress默认的等待提示框"></a>一、Devexpress默认的等待提示框</h1><p>效果如下:</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/old_jdt.png" alt=""></p>
<p>主要代码如下：</p>
<pre><code>WaitDialogForm wdf = new WaitDialogForm(&quot;提示&quot;, &quot;正在加载配置......&quot;);
     int i = 100;
     for (int j = 1; j &lt; i; j++)
     {
         Thread.Sleep(3000);
         string id = i.ToString() + &quot;%&quot;;
         string jd = j.ToString() + &quot;%&quot;;
         wdf.SetCaption(&quot;执行进度（&quot; +jd + &quot;/&quot; +id+ &quot;）&quot;);
     }
     wdf.Close();
</code></pre><p>如果提示错误，记得引入：</p>
<pre><code>using DevExpress.Utils;
</code></pre><p>Devexpress默认的等待提示框看起来不够友好，所以我在它的基础上进行了重写。</p>
<h1 id="二、Devexpress升级版含等待条的提示框"><a href="#二、Devexpress升级版含等待条的提示框" class="headerlink" title="二、Devexpress升级版含等待条的提示框"></a>二、Devexpress升级版含等待条的提示框</h1><p>效果如下：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/new_jdt.png" alt=""></p>
<p>是不是感觉高大上好多！</p>
<p>下面上主要代码：</p>
<pre><code>int i = 100;
      ShowDialogForm sdf = new ShowDialogForm(&quot;Point&quot;, &quot;Loading...&quot;, &quot;Please be patient for dozens of seconds &quot;, i);
      for (int j = 1; j &lt; i; j++)
      {
          Thread.Sleep(300);
          string id = j.ToString() + &quot;%&quot;;
          string jd = i.ToString() + &quot;%&quot;;
          sdf.SetCaption(&quot;Execution Progress（&quot; + id + &quot;/&quot; + jd + &quot;）&quot;);
      }
      sdf.Close();
</code></pre><p>注意引入：</p>
<pre><code>using ET.ManagerApp;
</code></pre><h2 id="主要文件如下"><a href="#主要文件如下" class="headerlink" title="主要文件如下"></a>主要文件如下</h2><p>1.ShowDialogForm.cs文件</p>
<pre><code>using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using DevExpress.XtraEditors;

namespace ET.ManagerApp
{
public partial class ShowDialogForm : DevExpress.XtraEditors.XtraForm
{
    #region Fields &amp; Properties
    /// &lt;summary&gt;
    /// 标题
    /// &lt;/summary&gt;
    private string caption;

    public string Caption
    {
        get { return caption; }
        set { caption = value; }
    }
    /// &lt;summary&gt;
    /// 消息
    /// &lt;/summary&gt;
    private string message;

    public string Message
    {
        get { return message; }
        set { message = value; }
    }
    /// &lt;summary&gt;
    /// 描述
    /// &lt;/summary&gt;
    private string content;

    public string Content
    {
        get { return content; }
        set { content = value; }
    }
    /// &lt;summary&gt;
    /// 进度条最小值
    /// &lt;/summary&gt;
    private int minProcess = 1;

    public int MinProcess
    {
        get { return minProcess; }
        set { minProcess = value; }
    }
    /// &lt;summary&gt;
    /// 进度条最大值
    /// &lt;/summary&gt;
    private int maxProcess = 100;

    public int MaxProcess
    {
        get { return maxProcess; }
        set { maxProcess = value; }
    }
    #endregion

    #region Constructed Function
    public ShowDialogForm()
    {
        InitializeComponent();
    }
    /// &lt;summary&gt;
    /// 设置
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;_caption&quot;&gt;提示&lt;/param&gt;
    public ShowDialogForm(string _caption)
        : this(_caption, &quot;&quot;, &quot;&quot;, 100)
    {
    }

    /// &lt;summary&gt;
    /// 设置
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;_caption&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;_message&quot;&gt;&lt;/param&gt;
    public ShowDialogForm(string _caption,string _message) 
        : this(_caption, _message, &quot;&quot;,100)
    {
    }

    /// &lt;summary&gt;
    /// 设置
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;_caption&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;_message&quot;&gt;&lt;/param&gt;
    /// &lt;param name=&quot;_content&quot;&gt;&lt;/param&gt;
    public ShowDialogForm(string _caption, string _message,string _content)
        : this(_caption, _message, _content, 100)
    {
    }

    /// &lt;summary&gt;
    /// 设置
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;_caption&quot;&gt;提示&lt;/param&gt;
    /// &lt;param name=&quot;_message&quot;&gt;消息内容&lt;/param&gt;
    /// &lt;param name=&quot;_content&quot;&gt;详细描述&lt;/param&gt;
    /// &lt;param name=&quot;_maxProcess&quot;&gt;进度条最大值&lt;/param&gt;
    public ShowDialogForm(string _caption, string _message,string _content,int _maxProcess)
        : this()
    {
        this.Caption = &quot;&quot;;
        this.Message = &quot;&quot;;
        this.Content = &quot;&quot;;

        this.Caption = _caption == &quot;&quot; ? &quot;提示&quot; : _caption;
        this.Message = _message == &quot;&quot; ? &quot;正在加载，请稍后......&quot; : _message;
        this.Content = _content;
        this.maxProcess = _maxProcess &gt; this.MinProcess ? _maxProcess : MinProcess;

        lblCaption.Text = this.Caption;
        lblMessage.Text = this.Message;
        lblContent.Text = this.Content;
        progressShow.Properties.Minimum = MinProcess;
        progressShow.Properties.Maximum = MaxProcess;
        progressShow.Properties.Step = 1;
        progressShow.PerformStep();

        this.ShowInTaskbar = false;
        this.TopMost = true;
        this.Show();
        this.Refresh();
    }
    #endregion

    #region Methods
    /// &lt;summary&gt;
    /// 设置提示
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;newCaption&quot;&gt;&lt;/param&gt;
    public void SetCaption(string newCaption)
    {
        this.Caption = newCaption;
        lblCaption.Text = this.Caption;
        progressShow.PerformStep();
        this.Refresh();
    }
    /// &lt;summary&gt;
    /// 设置消息
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;newMessage&quot;&gt;&lt;/param&gt;
    public void SetMessage(string newMessage)
    {
        this.Message = newMessage;
        lblMessage.Text = this.Message;
        progressShow.PerformStep();
        this.Refresh();
    }
    /// &lt;summary&gt;
    /// 设置描述
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;newContent&quot;&gt;&lt;/param&gt;
    public void SetContent(string newContent)
    {
        this.Content = newContent;
        lblContent.Text = this.Content;
        progressShow.PerformStep();
        this.Refresh();
    }
    #endregion

    #region Events
    protected override void OnClosing(CancelEventArgs e)
    {
        base.OnClosing(e);
    }
    #endregion
}
}
</code></pre><p>2.ShowDialogForm.Designer.cs文件</p>
<pre><code>namespace ET.ManagerApp
{
partial class ShowDialogForm
{
    /// &lt;summary&gt;
    /// Required designer variable.
    /// &lt;/summary&gt;
    private System.ComponentModel.IContainer components = null;

    /// &lt;summary&gt;
    /// Clean up any resources being used.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;disposing&quot;&gt;true if managed resources should be disposed; otherwise, false.&lt;/param&gt;
    protected override void Dispose(bool disposing)
    {
        if (disposing &amp;&amp; (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Windows Form Designer generated code

    /// &lt;summary&gt;
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// &lt;/summary&gt;
    private void InitializeComponent()
    {
        this.panelControl1 = new DevExpress.XtraEditors.PanelControl();
        this.lblCaption = new DevExpress.XtraEditors.LabelControl();
        this.lblMessage = new DevExpress.XtraEditors.LabelControl();
        this.lblContent = new DevExpress.XtraEditors.LabelControl();
        this.progressShow = new DevExpress.XtraEditors.ProgressBarControl();
        this.panelControl2 = new DevExpress.XtraEditors.PanelControl();
        ((System.ComponentModel.ISupportInitialize)(this.panelControl1)).BeginInit();
        this.panelControl1.SuspendLayout();
        ((System.ComponentModel.ISupportInitialize)(this.progressShow.Properties)).BeginInit();
        ((System.ComponentModel.ISupportInitialize)(this.panelControl2)).BeginInit();
        this.panelControl2.SuspendLayout();
        this.SuspendLayout();
        // 
        // panelControl1
        // 
        this.panelControl1.BorderStyle = DevExpress.XtraEditors.Controls.BorderStyles.Style3D;
        this.panelControl1.Controls.Add(this.lblCaption);
        this.panelControl1.Dock = System.Windows.Forms.DockStyle.Top;
        this.panelControl1.Location = new System.Drawing.Point(0, 0);
        this.panelControl1.Name = &quot;panelControl1&quot;;
        this.panelControl1.Size = new System.Drawing.Size(436, 34);
        this.panelControl1.TabIndex = 0;
        // 
        // lblCaption
        // 
        this.lblCaption.Location = new System.Drawing.Point(5, 9);
        this.lblCaption.Name = &quot;lblCaption&quot;;
        this.lblCaption.Size = new System.Drawing.Size(41, 14);
        this.lblCaption.TabIndex = 0;
        this.lblCaption.Text = &quot;Caption&quot;;
        // 
        // lblMessage
        // 
        this.lblMessage.Location = new System.Drawing.Point(24, 7);
        this.lblMessage.Name = &quot;lblMessage&quot;;
        this.lblMessage.Size = new System.Drawing.Size(46, 14);
        this.lblMessage.TabIndex = 2;
        this.lblMessage.Text = &quot;Message&quot;;
        // 
        // lblContent
        // 
        this.lblContent.Location = new System.Drawing.Point(24, 31);
        this.lblContent.Name = &quot;lblContent&quot;;
        this.lblContent.Size = new System.Drawing.Size(45, 14);
        this.lblContent.TabIndex = 3;
        this.lblContent.Text = &quot;Content&quot;;
        // 
        // progressShow
        // 
        this.progressShow.EditValue = 1;
        this.progressShow.Location = new System.Drawing.Point(24, 59);
        this.progressShow.Name = &quot;progressShow&quot;;
        this.progressShow.Properties.Appearance.BackColor = System.Drawing.Color.Transparent;
        this.progressShow.Properties.Appearance.ForeColor = System.Drawing.Color.Black;
        this.progressShow.Properties.EndColor = System.Drawing.Color.Empty;
        this.progressShow.Properties.LookAndFeel.SkinName = &quot;Blue&quot;;
        this.progressShow.Properties.LookAndFeel.UseDefaultLookAndFeel = false;
        this.progressShow.Properties.LookAndFeel.UseWindowsXPTheme = true;
        this.progressShow.Properties.ReadOnly = true;
        this.progressShow.Properties.ShowTitle = true;
        this.progressShow.Properties.StartColor = System.Drawing.Color.Empty;
        this.progressShow.Properties.Step = 1;
        this.progressShow.Size = new System.Drawing.Size(400, 15);
        this.progressShow.TabIndex = 4;
        // 
        // panelControl2
        // 
        this.panelControl2.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom) 
        | System.Windows.Forms.AnchorStyles.Left) 
        | System.Windows.Forms.AnchorStyles.Right)));
        this.panelControl2.Controls.Add(this.lblContent);
        this.panelControl2.Controls.Add(this.progressShow);
        this.panelControl2.Controls.Add(this.lblMessage);
        this.panelControl2.Location = new System.Drawing.Point(0, 38);
        this.panelControl2.Name = &quot;panelControl2&quot;;
        this.panelControl2.Size = new System.Drawing.Size(436, 83);
        this.panelControl2.TabIndex = 5;
        // 
        // ShowDialogForm
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(7F, 14F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(436, 124);
        this.Controls.Add(this.panelControl2);
        this.Controls.Add(this.panelControl1);
        this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None;
        this.MaximizeBox = false;
        this.MinimizeBox = false;
        this.Name = &quot;ShowDialogForm&quot;;
        this.ShowIcon = false;
        this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
        this.Text = &quot;ShowDialogForm&quot;;
        ((System.ComponentModel.ISupportInitialize)(this.panelControl1)).EndInit();
        this.panelControl1.ResumeLayout(false);
        this.panelControl1.PerformLayout();
        ((System.ComponentModel.ISupportInitialize)(this.progressShow.Properties)).EndInit();
        ((System.ComponentModel.ISupportInitialize)(this.panelControl2)).EndInit();
        this.panelControl2.ResumeLayout(false);
        this.panelControl2.PerformLayout();
        this.ResumeLayout(false);

    }

    #endregion

    private DevExpress.XtraEditors.PanelControl panelControl1;
    private DevExpress.XtraEditors.LabelControl lblCaption;
    private DevExpress.XtraEditors.LabelControl lblMessage;
    private DevExpress.XtraEditors.LabelControl lblContent;
    private DevExpress.XtraEditors.ProgressBarControl progressShow;
    private DevExpress.XtraEditors.PanelControl panelControl2;
}
}
</code></pre><p>3.ShowDialogForm.resx文件</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;root&gt;
  &lt;!-- 
Microsoft ResX Schema 

Version 2.0

The primary goals of this format is to allow a simple XML format 
that is mostly human readable. The generation and parsing of the 
various data types are done through the TypeConverter classes 
associated with the data types.

Example:

... ado.net/XML headers &amp; schema ...
&lt;resheader name=&quot;resmimetype&quot;&gt;text/microsoft-resx&lt;/resheader&gt;
&lt;resheader name=&quot;version&quot;&gt;2.0&lt;/resheader&gt;
&lt;resheader name=&quot;reader&quot;&gt;System.Resources.ResXResourceReader, System.Windows.Forms, ...&lt;/resheader&gt;
&lt;resheader name=&quot;writer&quot;&gt;System.Resources.ResXResourceWriter, System.Windows.Forms, ...&lt;/resheader&gt;
&lt;data name=&quot;Name1&quot;&gt;&lt;value&gt;this is my long string&lt;/value&gt;&lt;comment&gt;this is a comment&lt;/comment&gt;&lt;/data&gt;
&lt;data name=&quot;Color1&quot; type=&quot;System.Drawing.Color, System.Drawing&quot;&gt;Blue&lt;/data&gt;
&lt;data name=&quot;Bitmap1&quot; mimetype=&quot;application/x-microsoft.net.object.binary.base64&quot;&gt;
    &lt;value&gt;[base64 mime encoded serialized .NET Framework object]&lt;/value&gt;
&lt;/data&gt;
&lt;data name=&quot;Icon1&quot; type=&quot;System.Drawing.Icon, System.Drawing&quot; mimetype=&quot;application/x-microsoft.net.object.bytearray.base64&quot;&gt;
    &lt;value&gt;[base64 mime encoded string representing a byte array form of the .NET Framework object]&lt;/value&gt;
    &lt;comment&gt;This is a comment&lt;/comment&gt;
&lt;/data&gt;

There are any number of &quot;resheader&quot; rows that contain simple 
name/value pairs.

Each data row contains a name, and value. The row also contains a 
type or mimetype. Type corresponds to a .NET class that support 
text/value conversion through the TypeConverter architecture. 
Classes that don&apos;t support this are serialized and stored with the 
mimetype set.

The mimetype is used for serialized objects, and tells the 
ResXResourceReader how to depersist the object. This is currently not 
extensible. For a given mimetype the value must be set accordingly:

Note - application/x-microsoft.net.object.binary.base64 is the format 
that the ResXResourceWriter will generate, however the reader can 
read any of the formats listed below.

mimetype: application/x-microsoft.net.object.binary.base64
value   : The object must be serialized with 
        : System.Runtime.Serialization.Formatters.Binary.BinaryFormatter
        : and then encoded with base64 encoding.

mimetype: application/x-microsoft.net.object.soap.base64
value   : The object must be serialized with 
        : System.Runtime.Serialization.Formatters.Soap.SoapFormatter
        : and then encoded with base64 encoding.

mimetype: application/x-microsoft.net.object.bytearray.base64
value   : The object must be serialized into a byte array 
        : using a System.ComponentModel.TypeConverter
        : and then encoded with base64 encoding.
--&gt;
  &lt;xsd:schema id=&quot;root&quot; xmlns=&quot;&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:msdata=&quot;urn:schemas-microsoft-com:xml-msdata&quot;&gt;
&lt;xsd:import namespace=&quot;http://www.w3.org/XML/1998/namespace&quot; /&gt;
&lt;xsd:element name=&quot;root&quot; msdata:IsDataSet=&quot;true&quot;&gt;
  &lt;xsd:complexType&gt;
    &lt;xsd:choice maxOccurs=&quot;unbounded&quot;&gt;
      &lt;xsd:element name=&quot;metadata&quot;&gt;
        &lt;xsd:complexType&gt;
          &lt;xsd:sequence&gt;
            &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; /&gt;
          &lt;/xsd:sequence&gt;
          &lt;xsd:attribute name=&quot;name&quot; use=&quot;required&quot; type=&quot;xsd:string&quot; /&gt;
          &lt;xsd:attribute name=&quot;type&quot; type=&quot;xsd:string&quot; /&gt;
          &lt;xsd:attribute name=&quot;mimetype&quot; type=&quot;xsd:string&quot; /&gt;
          &lt;xsd:attribute ref=&quot;xml:space&quot; /&gt;
        &lt;/xsd:complexType&gt;
      &lt;/xsd:element&gt;
      &lt;xsd:element name=&quot;assembly&quot;&gt;
        &lt;xsd:complexType&gt;
          &lt;xsd:attribute name=&quot;alias&quot; type=&quot;xsd:string&quot; /&gt;
          &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; /&gt;
        &lt;/xsd:complexType&gt;
      &lt;/xsd:element&gt;
      &lt;xsd:element name=&quot;data&quot;&gt;
        &lt;xsd:complexType&gt;
          &lt;xsd:sequence&gt;
            &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;1&quot; /&gt;
            &lt;xsd:element name=&quot;comment&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;2&quot; /&gt;
          &lt;/xsd:sequence&gt;
          &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot; msdata:Ordinal=&quot;1&quot; /&gt;
          &lt;xsd:attribute name=&quot;type&quot; type=&quot;xsd:string&quot; msdata:Ordinal=&quot;3&quot; /&gt;
          &lt;xsd:attribute name=&quot;mimetype&quot; type=&quot;xsd:string&quot; msdata:Ordinal=&quot;4&quot; /&gt;
          &lt;xsd:attribute ref=&quot;xml:space&quot; /&gt;
        &lt;/xsd:complexType&gt;
      &lt;/xsd:element&gt;
      &lt;xsd:element name=&quot;resheader&quot;&gt;
        &lt;xsd:complexType&gt;
          &lt;xsd:sequence&gt;
            &lt;xsd:element name=&quot;value&quot; type=&quot;xsd:string&quot; minOccurs=&quot;0&quot; msdata:Ordinal=&quot;1&quot; /&gt;
          &lt;/xsd:sequence&gt;
          &lt;xsd:attribute name=&quot;name&quot; type=&quot;xsd:string&quot; use=&quot;required&quot; /&gt;
        &lt;/xsd:complexType&gt;
      &lt;/xsd:element&gt;
    &lt;/xsd:choice&gt;
  &lt;/xsd:complexType&gt;
&lt;/xsd:element&gt;
  &lt;/xsd:schema&gt;
  &lt;resheader name=&quot;resmimetype&quot;&gt;
&lt;value&gt;text/microsoft-resx&lt;/value&gt;
  &lt;/resheader&gt;
  &lt;resheader name=&quot;version&quot;&gt;
&lt;value&gt;2.0&lt;/value&gt;
  &lt;/resheader&gt;
  &lt;resheader name=&quot;reader&quot;&gt;
&lt;value&gt;System.Resources.ResXResourceReader, System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/value&gt;
  &lt;/resheader&gt;
  &lt;resheader name=&quot;writer&quot;&gt;
&lt;value&gt;System.Resources.ResXResourceWriter, System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/value&gt;
  &lt;/resheader&gt;
&lt;/root&gt;
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2017/12/05/jsp遍历两个集合情况/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2017/12/05/jsp遍历两个集合情况/" itemprop="url">JSP遍历两个集合的情况</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-05T19:36:06+08:00">
                2017-12-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2017/12/05/jsp遍历两个集合情况/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/12/05/jsp遍历两个集合情况/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>比如后台系统传递两个集合:</p>
<pre><code>model.addAttribute(&quot;list&quot;,list);
model.addAttribute(&quot;numbers&quot;,numbers);
</code></pre><p>前台系统:</p>
<p>1.首先引入标签库</p>
<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;  
</code></pre><p>2.编写js代码</p>
<pre><code>&lt;c:forEach var=&quot;item&quot; items=&quot;${list.list }&quot; varStatus=&quot;s&quot;&gt;
        &lt;tr target=&quot;item_id&quot; rel=&quot;${item.id}&quot;&gt;
            &lt;td&gt;${item.name }&lt;/td&gt;
            &lt;td&gt;${numbers[s.count-1].name}&lt;/td&gt;
            &lt;td&gt;${item.area }&lt;/td&gt;
            &lt;td&gt;${item.moduleName }&lt;/td&gt;
            &lt;td&gt;&lt;fmt:formatDate value=&quot;${item.rptTime}&quot; pattern=&quot;yyyy-MM-dd HH:mm:ss&quot;&gt;&lt;/fmt:formatDate&gt;&lt;/td&gt;           
        &lt;/tr&gt;
&lt;/c:forEach&gt;
</code></pre><p>说明：</p>
<pre><code>&lt;td&gt;${numbers[s.count-1].name}&lt;/td&gt;
其中name是numbers集合存储的对象类型的属性，如果numbers集合存储的是String，可以直接使用
&lt;td&gt;${numbers[s.count-1]}&lt;/td&gt;
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2017/11/26/linux下安装nginx及开机自启动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2017/11/26/linux下安装nginx及开机自启动/" itemprop="url">linux下安装nginx及开机自启动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-26T20:36:06+08:00">
                2017-11-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2017/11/26/linux下安装nginx及开机自启动/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/26/linux下安装nginx及开机自启动/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、安装nginx"><a href="#一、安装nginx" class="headerlink" title="一、安装nginx"></a>一、安装nginx</h1><p>1.从<a href="http://nginx.org/download/上下载相应的版本(或者wget" target="_blank" rel="external">http://nginx.org/download/上下载相应的版本(或者wget</a> <a href="http://nginx.org/download/nginx-1.5.9.tar.gz直接在Linux上用命令下载" target="_blank" rel="external">http://nginx.org/download/nginx-1.5.9.tar.gz直接在Linux上用命令下载</a>)</p>
<pre><code>wget http://nginx.org/download/nginx-1.5.9.tar.gz
</code></pre><p>2.解压 </p>
<pre><code>tar -zxvf nginx-1.5.9.tar.gz 
</code></pre><p>3.设置一下配置信息，或者不执行此步，直接默认配置，与后面配置有关</p>
<pre><code>./configure --prefix=/usr/local/nginx 
</code></pre><p>4.make 编译 （make的过程是把各种语言写的源码文件，变成可执行文件和各种库文件）</p>
<pre><code>make
</code></pre><p>5.make install 安装 （make install是把这些编译出来的可执行文件和库文件复制到合适的地方）</p>
<pre><code>make install
</code></pre><p>6.启动nginx</p>
<pre><code>/usr/local/nginx/sbin/nginx
</code></pre><p>7.访问nginx，nginx默认端口为80</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/nginx.png" alt=""></p>
<p>8.安装过程中可能会遇到的错误</p>
<p>（1）错误为：./configure: error: the HTTP rewrite module requires the PCRE library.</p>
<p>安装pcre-devel解决问题</p>
<pre><code>yum -y install pcre-devel
</code></pre><p>（2）错误提示：./configure: error: the HTTP cache module requires md5 functions<br>from OpenSSL library.   You can either disable the module by using<br>–without-http-cache option, or install the OpenSSL library into the system,<br>or build the OpenSSL library statically from the source with nginx by using<br>–with-http_ssl_module –with-openssl=<path></path> options.</p>
<p>解决办法：</p>
<pre><code>yum -y install openssl openssl-devel
</code></pre><h1 id="二、nginx开机自启动"><a href="#二、nginx开机自启动" class="headerlink" title="二、nginx开机自启动"></a>二、nginx开机自启动</h1><p>1.在linux系统的/etc/init.d/目录下创建nginx文件</p>
<pre><code>vim /etc/init.d/nginx
</code></pre><p>2.在脚本中添加如下命令：</p>
<pre><code>#!/bin/sh
#
# nginx - this script starts and stops the nginx daemon
#
# chkconfig:   - 85 15
# description:  NGINX is an HTTP(S) server, HTTP(S) reverse \
#               proxy and IMAP/POP3 proxy server
# processname: nginx
# config:      /etc/nginx/nginx.conf
# config:      /etc/sysconfig/nginx
# pidfile:     /var/run/nginx.pid
# Source function library.
. /etc/rc.d/init.d/functions
# Source networking configuration.
. /etc/sysconfig/network
# Check that networking is up.
[ &quot;$NETWORKING&quot; = &quot;no&quot; ] &amp;&amp; exit 0
nginx=&quot;/usr/sbin/nginx&quot;
prog=$(basename $nginx)
NGINX_CONF_FILE=&quot;/etc/nginx/nginx.conf&quot;
[ -f /etc/sysconfig/nginx ] &amp;&amp; . /etc/sysconfig/nginx
lockfile=/var/lock/subsys/nginx
make_dirs() {
# make required directories
user=`$nginx -V 2&gt;&amp;1 | grep &quot;configure arguments:&quot; | sed &apos;s/[^*]*--user=\([^ ]*\).*/\1/g&apos; -`
if [ -z &quot;`grep $user /etc/passwd`&quot; ]; then
   useradd -M -s /bin/nologin $user
fi
options=`$nginx -V 2&gt;&amp;1 | grep &apos;configure arguments:&apos;`
for opt in $options; do
   if [ `echo $opt | grep &apos;.*-temp-path&apos;` ]; then
       value=`echo $opt | cut -d &quot;=&quot; -f 2`
       if [ ! -d &quot;$value&quot; ]; then
           # echo &quot;creating&quot; $value
           mkdir -p $value &amp;&amp; chown -R $user $value
       fi
   fi
done
}
start() {
[ -x $nginx ] || exit 5
[ -f $NGINX_CONF_FILE ] || exit 6
make_dirs
echo -n $&quot;Starting $prog: &quot;
daemon $nginx -c $NGINX_CONF_FILE
retval=$?
echo
[ $retval -eq 0 ] &amp;&amp; touch $lockfile
return $retval
}
stop() {
echo -n $&quot;Stopping $prog: &quot;
killproc $prog -QUIT
retval=$?
echo
[ $retval -eq 0 ] &amp;&amp; rm -f $lockfile
return $retval
}
restart() {
configtest || return $?
stop
sleep 1
start
}
reload() {
configtest || return $?
echo -n $&quot;Reloading $prog: &quot;
killproc $nginx -HUP
RETVAL=$?
echo
}
force_reload() {
restart
}
configtest() {
$nginx -t -c $NGINX_CONF_FILE
}
rh_status() {
status $prog
}
rh_status_q() {
rh_status &gt;/dev/null 2&gt;&amp;1
}
case &quot;$1&quot; in
start)
    rh_status_q &amp;&amp; exit 0
    $1
    ;;
stop)
    rh_status_q || exit 0
    $1
    ;;
restart|configtest)
    $1
    ;;
reload)
    rh_status_q || exit 7
    $1
    ;;
force-reload)
    force_reload
    ;;
status)
    rh_status
    ;;
condrestart|try-restart)
    rh_status_q || exit 0
        ;;
 *)
    echo $&quot;Usage: $0 {start|stop|status|restart|condrestart|try-restart|reload|force-reload|configtest}&quot;
    exit 2
esac
</code></pre><p>3.如果你是自定义编译安装的nginx，需要根据您的安装路径修改下面这两项配置：</p>
<pre><code>nginx=&quot;/usr/local/nginx/sbin/nginx&quot; 修改成nginx执行程序的路径。

NGINX_CONF_FILE=&quot;/usr/local/nginx/conf/nginx.conf&quot; 修改成配置文件的路径。
</code></pre><p>4.保存脚本文件后设置文件的执行权限：</p>
<pre><code>chmod a+x /etc/init.d/nginx
</code></pre><p>5.通过该脚本启动停止nginx服务</p>
<pre><code>/etc/init.d/nginx start
/etc/init.d/nginx stop
</code></pre><p>6.使用chkconfig进行管理，将nginx服务加入chkconfig管理列表</p>
<pre><code>chkconfig --add /etc/init.d/nginx
</code></pre><p>7.使用service对nginx进行启动，停止。重启等操作</p>
<pre><code>service nginx start
service nginx stop
</code></pre><p>8.设置终端模式开机启动</p>
<pre><code>chkconfig nginx on
</code></pre><h1 id="三、发布静态资源"><a href="#三、发布静态资源" class="headerlink" title="三、发布静态资源"></a>三、发布静态资源</h1><p>1.确定静态资源存放位置</p>
<pre><code>/home/images
</code></pre><p>2.修改nginx.conf配置文件</p>
<pre><code>vi /usr/local/nginx/conf/nginx.conf
</code></pre><p>3.主要修改如下：</p>
<pre><code>#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
worker_connections  1024;
}


http {
include       mime.types;
default_type  application/octet-stream;

#log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;
#                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;
#                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;

#access_log  logs/access.log  main;

sendfile        on;
#tcp_nopush     on;

#keepalive_timeout  0;
keepalive_timeout  65;

#gzip  on;

server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;
     charset utf-8;    

    #access_log  logs/host.access.log  main;

     location ~ .*\.(gif|jpg|jpeg|png)$ {    
    expires 24h;    
        root /home/images/;#指定图片存放路径    
        access_log /home/softs/nginx-1.5.9/logs/images.log;#日志存放路径    
        proxy_store on;    
        proxy_store_access user:rw group:rw all:rw;    
        proxy_temp_path         /home/images/;#图片访问路径    
        proxy_redirect          off;    
        proxy_set_header        Host 127.0.0.1;    
        client_max_body_size    10m;    
        client_body_buffer_size 1280k;    
        proxy_connect_timeout   900;    
        proxy_send_timeout      900;    
        proxy_read_timeout      900;    
        proxy_buffer_size       40k;    
        proxy_buffers           40 320k;    
        proxy_busy_buffers_size 640k;    
        proxy_temp_file_write_size 640k;    
        if ( !-e $request_filename)    
        {    
             proxy_pass  http://127.0.0.1;#默认80端口    
        }    
}      

    location / {
        root   /home/html; #html访问路径  
        index  index.html index.htm;
    }

    #error_page  404              /404.html;

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    #location ~ \.php$ {
    #    root           html;
    #    fastcgi_pass   127.0.0.1:9000;
    #    fastcgi_index  index.php;
    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
    #    include        fastcgi_params;
    #}

    # deny access to .htaccess files, if Apache&apos;s document root
    # concurs with nginx&apos;s one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
}


# another virtual host using mix of IP-, name-, and port-based configuration
#
#server {
#    listen       8000;
#    listen       somename:8080;
#    server_name  somename  alias  another.alias;

#    location / {
#        root   html;
#        index  index.html index.htm;
#    }
#}


# HTTPS server
#
#server {
#    listen       443 ssl;
#    server_name  localhost;

#    ssl_certificate      cert.pem;
#    ssl_certificate_key  cert.key;

#    ssl_session_cache    shared:SSL:1m;
#    ssl_session_timeout  5m;

#    ssl_ciphers  HIGH:!aNULL:!MD5;
#    ssl_prefer_server_ciphers  on;

#    location / {
#        root   html;
#        index  index.html index.htm;
#    }
#}

}
</code></pre><p>4.查看编译是否出错，如果没出错则成功</p>
<pre><code>cd /usr/local/nginx/sbin/
./nginx -t
</code></pre><p>5.显示如下即代表成功（如果报目录不存在错误，就创建目录即可）</p>
<pre><code>nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok
nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful
</code></pre><p>6.访问静态资源:192.168.120.139/1.png</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/1.png" alt=""></p>

          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2017/11/26/linux系统各服务相关设置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2017/11/26/linux系统各服务相关设置/" itemprop="url">linux系统各服务相关设置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-26T20:36:06+08:00">
                2017-11-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2017/11/26/linux系统各服务相关设置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/26/linux系统各服务相关设置/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、配置JDK环境变量"><a href="#一、配置JDK环境变量" class="headerlink" title="一、配置JDK环境变量"></a>一、配置JDK环境变量</h1><pre><code>#vi /etc/profile
</code></pre><p>在该profile文件中最下面添加：</p>
<pre><code>export JAVA_HOME=/root/softs/jdk1.8.0_77
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin
添加完毕保存退出
</code></pre><p>友情提示：</p>
<p>1.使用G 使光标跳到最后一行（区分大小写）</p>
<p>2.gg可以使光标回到首行（区分大小写）</p>
<pre><code>source /etc/profile 使配置的环境变量立即生效
</code></pre><p>检测是否安装成功</p>
<p>1.查看版本</p>
<pre><code># java-version
</code></pre><p>java version “1.7.0”</p>
<p>Java(TM) SE Runtime Environment (build 1.7.0-b147)</p>
<p>Java HotSpot(TM) Client VM (build 21.0-b17, mixed mode, sharing)</p>
<p>2.查看JAVA_HOME路径</p>
<pre><code># echo $JAVA_HOME
</code></pre><p>/usr/java/jdk1.7.0</p>
<p>出现以上提示说明配置成功！</p>
<h1 id="二、防火墙设置"><a href="#二、防火墙设置" class="headerlink" title="二、防火墙设置"></a>二、防火墙设置</h1><p>1.要开放的端口如下：</p>
<p>61616/tcp —activemq端口</p>
<p>80/tcp —可以省略的端口，网站常用端口</p>
<p>6080/tcp—程序中使用的TCP端口 </p>
<p>6080/udp —程序中使用的UDP端口 </p>
<p>8080/tcp —tomcat默认端口</p>
<p>3306/tcp—mysql默认端口</p>
<p>2.查看已经开放的端口：</p>
<pre><code>firewall-cmd --list-ports
</code></pre><p>3.开启端口：</p>
<pre><code>firewall-cmd --zone=public --add-port=3306/tcp --permanent
firewall-cmd --zone=public --add-port=8080/tcp --permanent
firewall-cmd --zone=public --add-port=6080/udp --permanent
firewall-cmd --zone=public --add-port=80/tcp --permanent
firewall-cmd --zone=public --add-port=6080/tcp --permanent
firewall-cmd --zone=public --add-port=61616/tcp --permanent
</code></pre><p>4.重启防火墙：</p>
<pre><code>firewall-cmd --reload 
</code></pre><p>5.再次查看已经开放的端口：</p>
<pre><code>firewall-cmd --list-ports
</code></pre><p>结果如下：</p>
<pre><code>61616/tcp 80/tcp 6080/tcp 6080/udp 8080/tcp 3306/tcp
</code></pre><h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><p>1.开启端口命令含义：</p>
<p>–zone #作用域</p>
<p>–add-port=80/tcp #添加端口，格式为：端口/通讯协议</p>
<p>–permanent #永久生效，没有此参数重启后失效</p>
<p>2.firewall重启、停止、禁止命令</p>
<pre><code>firewall-cmd --reload #重启firewall
systemctl stop firewalld.service #停止firewall
systemctl disable firewalld.service #禁止firewall开机启动
</code></pre><p>3.CentOS 7 以下版本 iptables 命令</p>
<p>如要开放80，22，8080 端口，输入以下命令即可</p>
<pre><code>/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT
sbin/iptables -I INPUT -p tcp --dport 22 -j ACCEPT
/sbin/iptables -I INPUT -p tcp --dport 8080 -j ACCEPT
</code></pre><p>然后保存：</p>
<pre><code>/etc/rc.d/init.d/iptables save
</code></pre><p>查看打开的端口：</p>
<pre><code>/etc/init.d/iptables status
</code></pre><p>关闭防火墙 </p>
<p>1） 永久性生效，重启后不会复原</p>
<pre><code>开启： chkconfig iptables on

关闭： chkconfig iptables off
</code></pre><p>2） 即时生效，重启后复原</p>
<pre><code>开启： service iptables start

关闭： service iptables stop
</code></pre><h1 id="三、Tomcat开机自启动配置"><a href="#三、Tomcat开机自启动配置" class="headerlink" title="三、Tomcat开机自启动配置"></a>三、Tomcat开机自启动配置</h1><p>1.vi编辑rc.local文件</p>
<pre><code>vi /etc/rc.d/rc.local 
</code></pre><p>在文件最后加上下面俩行脚本。</p>
<pre><code>export JAVA_HOME=/root/softs/jdk1.8.0_77  
/root/softs/apache-tomcat-8.0.39/bin/startup.sh start
</code></pre><p>JAVA_HOME 是jdk的安装路径</p>
<p>/root/softs/apache-tomcat-8.0.39  是tomcat的安装目录</p>
<p>2、修改rc.local文件为可执行:</p>
<pre><code>chmod +x rc.local
</code></pre><p>3、重启linux：</p>
<pre><code>shutdown -r now
</code></pre><p>4、可以配置内存等相关设置。</p>
<p>Linux下修改JVM内存大小：</p>
<p>要添加在tomcat 的bin 下catalina.sh 里，位置cygwin=false前 。注意引号要带上,第二行为新添加的.</p>
<pre><code># OS specific support. $var _must_ be set to either true or false.
export JAVA_OPTS=&quot;-Xms512m -Xmx1024m -XX:PermSize=128m -XX:MaxPermSize=256m&quot;
cygwin=false
</code></pre><h1 id="四、ActiveMQ开机自启动配置"><a href="#四、ActiveMQ开机自启动配置" class="headerlink" title="四、ActiveMQ开机自启动配置"></a>四、ActiveMQ开机自启动配置</h1><p>1、在root权限下操作</p>
<p>2、拷贝activemq文件到/etc/init.d下</p>
<pre><code>cp /root/softs/apache-activemq-5.13.2/bin/activemq /etc/init.d
</code></pre><p>3、进入/etc/init.d目录</p>
<pre><code>cd /etc/init.d/
</code></pre><p>4、编辑activemq</p>
<pre><code>vi activemq
</code></pre><p>5、在#!/bin/sh后添加</p>
<pre><code>#!/bin/sh

### BEGIN INIT INFO
# chkconfig: 345 63 37
# description: Auto start ActiveMQ
# Provides:          activemq
# Required-Start:    $remote_fs $network $syslog
# Required-Stop:     $remote_fs $network $syslog
# Default-Start:     3 5
# Default-Stop:      0 1 6
# Short-Description: Starts ActiveMQ
# Description:       Starts ActiveMQ Message Broker Server
### END INIT INFO
</code></pre><p>在最后一个#后面添加</p>
<pre><code>export JAVA_HOME=/root/softs/jdk1.8.0_77
ACTIVEMQ_HOME=/root/softs/apache-activemq-5.13.2
</code></pre><p>如下图(路径改为自己的)：</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/mqc.png" alt=""></p>
<p>7、修改权限</p>
<pre><code>chmod +x activemq
</code></pre><p>8、添加系统服务</p>
<pre><code>chkconfig --add activemq
</code></pre><p>9、显示所有运行级系统服务的运行状态信息</p>
<pre><code>chkconfig --list #显示该服务则成功
</code></pre><p>结果如下：</p>
<pre><code>activemq           0:关    1:关    2:开    3:开    4:开    5:开    6:关
netconsole         0:关    1:关    2:关    3:关    4:关    5:关    6:关
network            0:关    1:关    2:开    3:开    4:开    5:开    6:关
rds_start          0:关    1:关    2:开    3:开    4:开    5:开    6:关
redis              0:关    1:关    2:开    3:开    4:开    5:开    6:关
</code></pre><p>如果想通过网页访问activemq,还需开启8161端口</p>
<pre><code>firewall-cmd --zone=public --add-port=8161/tcp --permanent
firewall-cmd --reload 
</code></pre><p>然后通过8161端口即可访问activemq网页</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/mq.png" alt=""></p>
<h2 id="拓展-1"><a href="#拓展-1" class="headerlink" title="拓展"></a>拓展</h2><p>在Ubuntu中，有可能没有chkconfig命令或者执行失败，可以用Ubuntu的update-rc.d命令替换</p>
<p>问题：<br>cp 到/etc/init.d目录下的时候，有时候启动会提示找不到路径等等问题，但是在安装目录启动就可以，所以可以通过软连接来实现启动脚本：</p>
<pre><code>ln -s /usr/local/activemq/bin/activemq /etc/init.d/
 /etc/init.d/activemq
</code></pre><hr>
<pre><code># 第二行插入
# chkconfig: 345 63 37
# description: Auto start ActiveMQ
</code></pre><hr>
<p>然后就可以添加开机启动了</p>
<pre><code>chkconfig activemq on

chkconfig --list activemq
</code></pre><p>也可以正常用服务的命令启动和停止</p>
<pre><code>service activemq start

service activemq status

service activemq stop
</code></pre><h1 id="五、Redis开机自启动配置"><a href="#五、Redis开机自启动配置" class="headerlink" title="五、Redis开机自启动配置"></a>五、Redis开机自启动配置</h1><p>1、设置redis.conf中daemonize为yes,确保守护进程开启。此步骤可让redis后台运行</p>
<pre><code>vi /root/softs/redis-3.2.5/redis.conf 
</code></pre><p>友情提示：</p>
<p>(1)使用下面命令可查找redis.conf文件的位置</p>
<pre><code>find / -name redis.conf
</code></pre><p>(2)在vi编辑页面输入下面命令可查找单词位置，用 n 或shift n 寻找上一个或下一个</p>
<pre><code>/daemonize 
</code></pre><p>(3)在vi编辑页面 输入下面命令显示所有匹配daemonize的行</p>
<pre><code>:g/daemonize/ 
</code></pre><p>2、编写开机自启动脚本</p>
<pre><code>vi /etc/init.d/redis
</code></pre><p>脚本内容如下：</p>
<pre><code># chkconfig: 2345 10 90  
# description: Start and Stop redis   

PATH=/usr/local/bin:/sbin:/usr/bin:/bin
REDISPORT=6379
EXEC=/root/softs/redis-3.2.5/src/redis-server    #改为你的server路径
#EXEC=/usr/local/bin/redis-server
REDIS_CLI=/root/softs/redis-3.2.5/src/redis-cli   #改为你的client路径

PIDFILE=/var/run/redis.pid   
CONF=&quot;/root/softs/redis-3.2.5/redis.conf&quot;       #改为你的redis.conf路径
AUTH=&quot;1234&quot;  

case &quot;$1&quot; in   
    start)   
            if [ -f $PIDFILE ]   
            then   
                    echo &quot;$PIDFILE exists, process is already running or crashed.&quot;  
            else  
                    echo &quot;Starting Redis server...&quot;  
                    $EXEC $CONF   
            fi   
            if [ &quot;$?&quot;=&quot;0&quot; ]   
            then   
                    echo &quot;Redis is running...&quot;  
            fi   
            ;;   
    stop)   
            if [ ! -f $PIDFILE ]   
            then   
                    echo &quot;$PIDFILE exists, process is not running.&quot;  
            else  
                    PID=$(cat $PIDFILE)   
                    echo &quot;Stopping...&quot;  
                   $REDIS_CLI -p $REDISPORT  SHUTDOWN    
                    sleep 2  
                   while [ -x $PIDFILE ]   
                   do  
                            echo &quot;Waiting for Redis to shutdown...&quot;  
                           sleep 1  
                    done   
                    echo &quot;Redis stopped&quot;  
            fi   
            ;;   
    restart|force-reload)   
            ${0} stop   
            ${0} start   
            ;;   
    *)   
           echo &quot;Usage: /etc/init.d/redis {start|stop|restart|force-reload}&quot; &gt;&amp;2  
            exit 1  
esac    
</code></pre><p>3、写完后保存退出VI</p>
<pre><code>:mq!
</code></pre><p>4、设置权限</p>
<pre><code>chmod 755 redis
</code></pre><p>5、启动测试</p>
<pre><code>/etc/init.d/redis start
</code></pre><p>启动成功会提示如下信息：</p>
<pre><code>Starting Redis server...
Redis is running...
</code></pre><p>使用redis-cli测试：</p>
<pre><code>[root@rk ~]# /root/softs/redis-3.2.5/src/redis-cli
127.0.0.1:6379&gt; set foo bar
OK
127.0.0.1:6379&gt; get foo
&quot;bar&quot;
127.0.0.1:6379&gt; exit
</code></pre><p>6、设置开机自启动</p>
<pre><code>chkconfig redis on
</code></pre><p>7、关机重启测试</p>
<pre><code>reboot
</code></pre><p>然后在用redis-cli测试即可。</p>
<h2 id="拓展-2"><a href="#拓展-2" class="headerlink" title="拓展"></a>拓展</h2><p>解决windows文件到linux上出现乱码问题：</p>
<pre><code>dos2unix *
</code></pre><p>终止正在运行的程序</p>
<pre><code>ctrl+z可以将一个正在前台执行的命令放到后台，并且处于暂停状态，不可执行
</code></pre><h1 id="六、MySql安装及自启动配置"><a href="#六、MySql安装及自启动配置" class="headerlink" title="六、MySql安装及自启动配置"></a>六、MySql安装及自启动配置</h1><h2 id="1-下载mysql源安装包"><a href="#1-下载mysql源安装包" class="headerlink" title="1.下载mysql源安装包"></a>1.下载mysql源安装包</h2><pre><code>wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm
</code></pre><p>如果没有wget命令，yum安装</p>
<pre><code>yum -y install wget
</code></pre><h2 id="2-安装mysql源"><a href="#2-安装mysql源" class="headerlink" title="2.安装mysql源"></a>2.安装mysql源</h2><pre><code>yum localinstall mysql57-community-release-el7-8.noarch.rpm
</code></pre><p>检查mysql源是否安装成功</p>
<pre><code>yum repolist enabled | grep &quot;mysql.*-community.*&quot;
</code></pre><p>看到下图所示表示安装成功。</p>
<p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/mysql-1.png" alt=""></p>
<h2 id="3、安装MySQL"><a href="#3、安装MySQL" class="headerlink" title="3、安装MySQL"></a>3、安装MySQL</h2><pre><code>yum install mysql-community-server
</code></pre><p>启动MySQL服务</p>
<pre><code>systemctl start mysqld
</code></pre><p>查看MySQL的启动状态，如下图所示</p>
<pre><code>systemctl status mysqld
</code></pre><p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/mysql-2.png" alt=""></p>
<h2 id="4、设置开机自启动"><a href="#4、设置开机自启动" class="headerlink" title="4、设置开机自启动"></a>4、设置开机自启动</h2><pre><code>systemctl enable mysqld
systemctl daemon-reload
</code></pre><p>修改root本地登录密码,mysql安装完成之后，在/var/log/mysqld.log文件中给root生成了一个默认密码。通过下面的方式找到root默认密码</p>
<pre><code>grep &apos;temporary password&apos; /var/log/mysqld.log
</code></pre><p><img src="https://raw.githubusercontent.com/wiki/wanglinyong/wanglinyong.github.io/mysql-3.png" alt=""></p>
<p>然后登录mysql进行修改：</p>
<pre><code>mysql -uroot -p

mysql&gt; ALTER USER &apos;root&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;root&apos;; 
</code></pre><h2 id="注意：mysql5-7默认安装了密码安全检查插件"><a href="#注意：mysql5-7默认安装了密码安全检查插件" class="headerlink" title="注意：mysql5.7默认安装了密码安全检查插件"></a>注意：mysql5.7默认安装了密码安全检查插件</h2><p>默认密码检查策略要求密码必须包含：大小写字母、数字和特殊符号，并且长度不能少于8位。否则会提示如下错误</p>
<pre><code>ERROR 1819 (HY000): Your password does not satisfy 

the current policy requirements
</code></pre><p>修改密码策略</p>
<p>在/etc/my.cnf文件添加validate_password_policy配置，指定密码策略</p>
<p>选择0（LOW），1（MEDIUM），2（STRONG）其中一种，选择2需要提供密码字典文件</p>
<pre><code>validate_password_policy=0
</code></pre><p>如果不需要密码策略，添加my.cnf文件中添加如下配置禁用即可：</p>
<pre><code>validate_password = off
</code></pre><p>重新启动mysql服务使配置生效：</p>
<pre><code>systemctl restart mysqld
</code></pre><h2 id="5、添加远程登录用户"><a href="#5、添加远程登录用户" class="headerlink" title="5、添加远程登录用户"></a>5、添加远程登录用户</h2><p>默认只允许root帐户在本地登录，如果要在其它机器上连接mysql，必须修改root允许远程连接，或者添加一个允许远程连接的帐户，为了安全起见，添加一个新的帐户：</p>
<pre><code>mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 
&apos;wanglinyong&apos;@&apos;%&apos; IDENTIFIED BY &apos;wanglinyong0617&apos; 
WITH GRANT OPTION;
</code></pre><h2 id="6、配置默认编码为utf8"><a href="#6、配置默认编码为utf8" class="headerlink" title="6、配置默认编码为utf8"></a>6、配置默认编码为utf8</h2><p>修改/etc/my.cnf配置文件，在[mysqld]下添加编码配置，如下所示：</p>
<pre><code>[mysqld]
character_set_server=utf8
init_connect=&apos;SET NAMES utf8&apos;
</code></pre><p>重新启动mysql服务</p>
<pre><code>systemctl restart mysqld
</code></pre><p>默认配置文件路径： </p>
<pre><code>配置文件：/etc/my.cnf 
日志文件：/var/log//var/log/mysqld.log 
服务启动脚本：/usr/lib/systemd/system/mysqld.service 
socket文件：/var/run/mysqld/mysqld.pid
</code></pre><h1 id="注意"><a href="#注意" class="headerlink" title="注意!!"></a>注意!!</h1><p>如果启动项目之后访问网页总是提示某表找不到，是因为mysql表名区分了大小写</p>
<p>解决办法</p>
<pre><code>vi /etc/my.cnf
</code></pre><p>加入如下配置即可</p>
<pre><code>[mysqld]
lower_case_table_names=1
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wanglinyong.github.io/wanglinyong.github.io/2017/11/22/linux系统如何移动mysql存放文件的位置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WangLinYong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/wanglinyong.github.io/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/wanglinyong.github.io/2017/11/22/linux系统如何移动mysql存放文件的位置/" itemprop="url">linux系统如何移动mysql存放文件的位置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-11-22T18:58:06+08:00">
                2017-11-22
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/wanglinyong.github.io/2017/11/22/linux系统如何移动mysql存放文件的位置/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/11/22/linux系统如何移动mysql存放文件的位置/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="查看mysql情况"><a href="#查看mysql情况" class="headerlink" title="查看mysql情况"></a>查看mysql情况</h2><p>指令 ps -ef | grep mysql 得出结果</p>
<p>1.root     17659     1  0  2011 ?        00:00:00 /bin/sh /usr/bin/mysqld_safe –datadir=/var/lib/mysql –socket=/var/lib/mysql/mysql.sock –log-error=/var/log/mysqld.log –pid-file=/var/run/mysqld/mysqld.pid   </p>
<p>2.mysql    17719 17659  0  2011 ?        03:14:57 /usr/libexec/mysqld –basedir=/usr –datadir=/var/lib/mysql –user=mysql –pid-file=/var/run/mysqld/mysqld.pid –skip-external-locking –socket=/var/lib/mysql/mysql.sock  </p>
<p>usr/bin/mysql 是指：mysql的运行路径 </p>
<p>var/lib/mysql 是指：mysql数据库文件的存放路径 </p>
<p>usr/lib/mysql 是指：mysql的安装路径</p>
<h2 id="移动mysql存放文件位置"><a href="#移动mysql存放文件位置" class="headerlink" title="移动mysql存放文件位置"></a>移动mysql存放文件位置</h2><p>假如要把目录移到/home/data下需要进行下面几步：</p>
<p>1、home目录下建立data目录</p>
<pre><code>cd /home
mkdir data
</code></pre><p>2、把MySQL服务进程停掉：</p>
<pre><code>mysqladmin -u root -p shutdown
</code></pre><p>3、把/var/lib/mysql整个目录移到/home/data</p>
<pre><code>mv /var/lib/mysql　/home/data/
</code></pre><p>这样就把MySQL的数据文件移动到了/home/data/mysql下</p>
<p>4、找到my.cnf配置文件<br>　　如果/etc/目录下没有my.cnf配置文件，请到/usr/share/mysql/下找到*.cnf文件，拷贝其中一个到/etc/并改名为my.cnf)中。命令如下：</p>
<pre><code>[root@test1 mysql]# cp /usr/share/mysql/my-medium.cnf　/etc/my.cnf
</code></pre><p>5、编辑MySQL的配置文件/etc/my.cnf<br>　　为保证MySQL能够正常工作，需要指明mysql.sock文件的产生位置。修改socket=/var/lib/mysql/mysql.sock一行中等号右边的值为：/home/mysql/mysql.sock 。操作如下：</p>
<pre><code>vi　 my.cnf　　　 (用vi工具编辑my.cnf文件，找到下列数据修改之)

[mysql]（加上此行）
socket=/home/data/mysql/mysql.sock（加上此行）
[mysqld]
#datadir=/var/lib/mysql（原内容，为了更稳妥用“#”注释此行）
#socket=/var/lib/mysql/mysql.sock（原内容，为了更稳妥用“#”注释此行）
datadir=/home/data/mysql（加上此行）
socket=/home/data/mysql/mysql.sock（加上此行）
</code></pre><p>6、修改MySQL启动脚本/etc/init.d/mysql（如果init.d目录下没有mysql文件请忽略此步骤）</p>
<p>　　最后，需要修改MySQL启动脚本/etc/init.d/mysql，把其中datadir=/var/lib/mysql一行中，等号右边的路径改成你现在的实际存放路径：home/data/mysql。</p>
<pre><code>[root@test1 etc]# vi　/etc/init.d/mysql
#datadir=/var/lib/mysql　　　　（注释此行）
datadir=/home/data/mysql　　 （加上此行）
</code></pre><p>7、重新启动MySQL服务</p>
<pre><code>/etc/init.d/mysql　start
</code></pre><p>或用reboot命令重启Linux<br>如果工作正常移动就成功了，否则对照前面的7步再检查一下。还要注意目录的属主和权限。</p>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>如果更换mysql数据目录后出现：</p>
<p>ERROR 2002 (HY000): Can’t connect to local MySQL server through socket ‘/var/lib/mysql/mysql.sock’ (2)</p>
<p>说明无法通过socket文件/var/lib/mysql/mysql.sock连接到mysql服务器，也就是说对于mysql程序来说，尽管把socket文件从/var/lib/mysql/mysql.sock转移到了/home/data/mysql/mysql.sock,在my.cnf里设置了，mysqld是知道了，但是对于mysql还是会从默认的安装目录/var/lib/mysql/里找这个mysql.sock文件，找不着，就不知道从哪里启动了。</p>
<p>解决方案一：设置软连接</p>
<pre><code>ln –s /home/data/mysql/mysql.sock /var/lib/mysql/
</code></pre><p>做完软连接，重启mysql服务，再次通过mysql程序连接就可以连上了。</p>
<p>解决方案二：检查my.cnf配置，是否有如下配置，如果没有，加上</p>
<pre><code>[mysql]
socket=/home/data/mysql/mysql.sock
</code></pre><h2 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h2><p>1.查找命令</p>
<pre><code>find / -name my.cnf　　#在根目录下查找文件my.cnf，表示在整个硬盘查找

find /etc -name my.cnf　　#在/etc目录下文件my.cnf

find /etc -name &apos;*srm*&apos;　　#使用通配符*(0或者任意多个)。表示在/etc目录下查找文件名中含有字符串‘srm’的文件

find . -name &apos;srm*&apos; 　　#表示当前目录下查找文件名开头是字符串‘srm’的文件
</code></pre><p>2.查看文件占用大小</p>
<pre><code>du -sh /*  查看根目录下所有文件的大小

du -sh /home/* 查看 home目录下所有文件的大小

du -sh * 查看当前目录下所有文件的大小
</code></pre><p>3.查看硬盘使用情况</p>
<pre><code>df -h 
</code></pre>
          
        
      
    </div>
    
    
    
<div>
  
</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/wanglinyong.github.io/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/wanglinyong.github.io/">1</a><span class="page-number current">2</span><a class="page-number" href="/wanglinyong.github.io/page/3/">3</a><a class="extend next" rel="next" href="/wanglinyong.github.io/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">WangLinYong</p>
              <p class="site-description motion-element" itemprop="description">JAVA，Python，C#，Node.js，个人博客，Github，hexo</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/wanglinyong.github.io/archives/">
              
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/wanglinyong.github.io/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/wanglinyong.github.io/tags/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/wanglinyong.github.io/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/wanglinyong" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/yourname" target="_blank" title="Twitter">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WangLinYong</span>

  
</div>


<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/wanglinyong.github.io/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/wanglinyong.github.io/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/wanglinyong.github.io/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/wanglinyong.github.io/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/wanglinyong.github.io/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/wanglinyong.github.io/js/src/bootstrap.js?v=5.1.3"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"your_username"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/wanglinyong.github.io/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/wanglinyong.github.io/js/src/hook-duoshuo.js"></script>
  










  









  





  

  

  
  

  

  

  

</body>
</html>
